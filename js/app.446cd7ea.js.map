{"version":3,"file":"js/app.446cd7ea.js","mappings":"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","sources":["webpack://chatlog_parser/./src/App.vue","webpack://chatlog_parser/./src/utils/tokenizerLoader.js","webpack://chatlog_parser/./src/App.vue?7ccd","webpack://chatlog_parser/./src/main.js","webpack://chatlog_parser/webpack/bootstrap","webpack://chatlog_parser/webpack/runtime/chunk loaded","webpack://chatlog_parser/webpack/runtime/compat get default export","webpack://chatlog_parser/webpack/runtime/define property getters","webpack://chatlog_parser/webpack/runtime/global","webpack://chatlog_parser/webpack/runtime/hasOwnProperty shorthand","webpack://chatlog_parser/webpack/runtime/jsonp chunk loading","webpack://chatlog_parser/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1><el-icon><ChatDotRound /></el-icon> 某种聊天记录</h1>\n    <div class=\"file-input-container\">\n      <label for=\"fileInput\" class=\"file-input-label\">\n        <el-icon><Upload /></el-icon>\n        选择 JSON 文件\n      </label>\n      <input type=\"file\" id=\"fileInput\" accept=\".json\" @change=\"handleFileChange\">\n      <label for=\"txtFileInput\" class=\"file-input-label\" style=\"margin-left: 12px;\">\n        <el-icon><Upload /></el-icon>\n        上传聊天txt\n      </label>\n      <input type=\"file\" id=\"txtFileInput\" accept=\".txt\" multiple @change=\"handleTxtFileChange\">\n      <div class=\"option-container\">\n        <el-switch\n          v-model=\"convertFullWidth\"\n          active-text=\"半角符号\"\n          inactive-text=\"保持原样\"\n        />\n      </div>\n    </div>\n    \n    <!-- 文件列表 -->\n    <div class=\"file-list\">\n      <h2><el-icon><Document /></el-icon> 聊天窗口列表</h2>\n      <div class=\"search-container\">\n        <el-input\n          v-model=\"searchQuery\"\n          placeholder=\"搜索聊天记录...\"\n          :prefix-icon=\"Search\"\n          clearable\n          @input=\"handleSearch\"\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n      </div>\n      <div class=\"file-list-content\">\n        <div v-if=\"lastOutputs.length > 0\" class=\"select-all-container\">\n          <label class=\"select-all-label\">\n            <input \n              type=\"checkbox\" \n              :checked=\"isAllSelected\" \n              @change=\"toggleSelectAll\"\n            >\n            <el-icon><Select /></el-icon>\n            选择所有\n          </label>\n        </div>\n        <ul v-if=\"lastOutputs.length > 0\">\n          <li v-for=\"(output, index) in filteredOutputs\" \n              :key=\"index\" \n              class=\"file-item\">\n            <label class=\"file-checkbox\">\n              <input \n                type=\"checkbox\" \n                v-model=\"selectedFiles[index]\"\n                @change=\"updateSelection\"\n              >\n            </label>\n            <span class=\"file-name\" @click=\"showFileContent(output)\">\n              <el-icon><ChatLineRound /></el-icon>\n              {{ output.filename }}\n            </span>\n          </li>\n        </ul>\n        <div v-else class=\"empty-state\">\n          <el-icon><UploadFilled /></el-icon>\n          请上传 conversation.json 文件 以查看聊天记录\n        </div>\n      </div>\n    </div>\n\n    <!-- 弹窗 -->\n    <div class=\"modal\" v-if=\"showModal\" @click.self=\"closeModal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <div class=\"header-top\">\n            <h3><el-icon><Document /></el-icon> {{ currentFile?.filename }}</h3>\n            <div class=\"header-actions\">\n              <div class=\"statistics-note\">\n                <el-tooltip\n                  effect=\"dark\"\n                  content=\"精确计算采用GPT官方分词器tokenizer-GPT 4o，不适用于Claude。考虑到聊天内容还包含文件、图片等无法被提取的内容，token计算结果仅供参考。\"\n                  placement=\"bottom\"\n                >\n                  <el-icon><InfoFilled /></el-icon>\n                </el-tooltip>\n              </div>\n              <button class=\"close-button\" @click=\"closeModal\">\n                <el-icon><Close /></el-icon>\n              </button>\n            </div>\n          </div>\n          <div class=\"statistics\">\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">总字数：</span>\n              <span class=\"stat-value\">{{ statistics.totalTokens }}</span>\n            </div>\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">AI回复：</span>\n              <span class=\"stat-value\">{{ statistics.assistantCount }}次</span>\n            </div>\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">用户消息：</span>\n              <span class=\"stat-value\">{{ statistics.userCount }}次</span>\n            </div>\n            <div class=\"token-calc\">\n              <button \n                class=\"token-button\" \n                @click=\"calculateExactTokens\"\n                :disabled=\"isCalculating\"\n              >\n                <el-icon v-if=\"!isCalculating\"><InfoFilled /></el-icon>\n                <el-icon v-else class=\"is-loading\"><Loading /></el-icon>\n                {{ isCalculating ? '计算中...' : '计算精确Token' }}\n              </button>\n              <span v-if=\"exactTokens !== null\" class=\"stat-value\">\n                <span class=\"token-value\">{{ exactTokens }}</span>\n                <span class=\"token-label\">tokens</span>\n              </span>\n            </div>\n          </div>\n          <!-- 搜索高亮导航 -->\n          <div v-if=\"searchKeyword && matchCount > 0\" class=\"search-nav\">\n            <button @click=\"gotoPrevMatch\" :disabled=\"matchCount <= 1\">上一个</button>\n            <span>{{ currentMatchIndex + 1 }} / {{ matchCount }}</span>\n            <button @click=\"gotoNextMatch\" :disabled=\"matchCount <= 1\">下一个</button>\n          </div>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"chat-container\">\n            <template v-for=\"(line, index) in chatLines\" :key=\"index\">\n              <div :class=\"['message-wrapper', getMessageClass(line)]\">\n                <div class=\"avatar\">\n                  <el-icon v-if=\"isLeftMessage(line)\" ><ChatDotRound /></el-icon>\n                  <el-icon v-else><User /></el-icon>\n                </div>\n                <div class=\"message-bubble\" v-html=\"getMessageContent(line, index)\" />\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"button-container\">\n      <button @click=\"handleDownload\" :disabled=\"!canDownload\">\n        <el-icon><Download /></el-icon>\n        导出选中对话\n      </button>\n    </div>\n    <div class=\"status\" v-text=\"status\"></div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, watch } from 'vue'\nimport JSZip from 'jszip'\nimport { marked } from 'marked'\nimport { ElMessage } from 'element-plus'\nimport { \n  ChatDotRound, \n  Upload, \n  Document, \n  Select, \n  ChatLineRound, \n  UploadFilled, \n  Close, \n  Download,\n  User,\n  Search,\n  InfoFilled,\n  Loading\n} from '@element-plus/icons-vue'\nimport { preloadEncoder, calculateTokens } from '@/utils/tokenizerLoader'\n\n// 配置 marked 允许 HTML 标签\nmarked.setOptions({\n  breaks: true,\n  gfm: true,\n  headerIds: false,\n  mangle: false,\n  pedantic: false,\n  smartLists: true,\n  smartypants: false\n});\n\nexport default {\n  name: 'App',\n  components: {\n    ChatDotRound,\n    Upload,\n    Document,\n    Select,\n    ChatLineRound,\n    UploadFilled,\n    Close,\n    Download,\n    User,\n    Search,\n    InfoFilled,\n    Loading\n  },\n  setup() {\n    const outputContent = ref('聊天记录将在这里显示');\n    const status = ref('');\n    const lastOutputs = ref([]);\n    const selectedFiles = ref([]);\n    const searchQuery = ref('');\n    const filteredOutputs = ref([]);\n    const canDownload = computed(() => selectedFiles.value.some(selected => selected));\n    const showModal = ref(false);\n    const currentFile = ref(null);\n    const isCalculating = ref(false)\n    const exactTokens = ref(null)\n    const searchKeyword = ref('')\n    const matchCount = ref(0)\n    const currentMatchIndex = ref(0)\n    const matchRefs = ref([])\n    const convertFullWidth = ref(false)\n\n    const isAllSelected = computed(() => {\n      return lastOutputs.value.length > 0 && \n             selectedFiles.value.every(selected => selected);\n    });\n\n    function toggleSelectAll(event) {\n      const checked = event.target.checked;\n      selectedFiles.value = lastOutputs.value.map(() => checked);\n    }\n\n    function updateSelection() {\n      selectedFiles.value = [...selectedFiles.value];\n    }\n\n    function sanitizeFilename(filename) {\n      return filename.replace(/[\\\\/*?:\"<>|]/g, \"\");\n    }\n\n    function extractDialogueFromMapping(mapping) {\n      const dialogues = [];\n      for (const randomKey in mapping) {\n        try {\n          const msg = mapping[randomKey].message;\n          const role = msg.author?.role || \"unknown\";\n          if (![\"user\", \"assistant\"].includes(role)) continue;\n          const content = msg.content || {};\n          if (content.parts && content.parts.length) {\n            const text = content.parts.join(\" \").replace(/^\"|\"$/g, \"\").trim();\n            if (text) {\n              const timestamp = msg.create_time ? new Date(msg.create_time * 1000) : null;\n              const formattedTime = timestamp ? timestamp.toLocaleString('zh-CN', {\n                year: 'numeric',\n                month: '2-digit',\n                day: '2-digit',\n                hour: '2-digit',\n                minute: '2-digit',\n                second: '2-digit',\n                hour12: false\n              }).replace(/\\//g, '-') : '';\n              dialogues.push(`【${role}】${formattedTime ? `[${formattedTime}]` : ''} ${text}`);\n            }\n          } else if (role === \"user\") {\n            const metadata = msg.metadata || {};\n            const userData = metadata.user_context_message_data || {};\n            const aboutModel = (userData.about_model_message || \"\").trim();\n            const aboutUser = (userData.about_user_message || \"\").trim();\n            let added = false;\n            if (aboutModel) {\n              dialogues.push(`【model_message】 ${aboutModel}`);\n              added = true;\n            }\n            if (aboutUser) {\n              dialogues.push(`【user_message】 ${aboutUser}`);\n              added = true;\n            }\n            if (added) {\n              dialogues.push(\"-\".repeat(80));\n            }\n          }\n        } catch (e) {\n          console.log(`处理 mapping 内随机键 ${randomKey} 时出错：${e}`);\n        }\n      }\n      return dialogues;\n    }\n\n    function extractDialogueFromDeepSeekMapping(mapping) {\n      const dialogues = [];\n      const messages = [];\n      \n      // 首先收集所有消息\n      for (const key in mapping) {\n          const item = mapping[key];\n          if (item.message && item.message.content) {\n            messages.push({\n              id: item.id,\n              parent: item.parent,\n              content: item.message.content,\n              inserted_at: item.message.inserted_at\n            });\n          }\n      }\n      \n      // 按时间排序\n      messages.sort((a, b) => {\n        if (a.inserted_at && b.inserted_at) {\n          return new Date(a.inserted_at) - new Date(b.inserted_at);\n        }\n        return 0;\n      });\n      \n      // 先构建id到消息的映射\n      const idMap = {};\n      messages.forEach(msg => { idMap[msg.id] = msg; });\n\n      // 构建对话\n      for (const msg of messages) {\n        let role = '';\n        let timestamp = '';\n        if (msg.parent === 'root') {\n          role = 'user';\n        } else {\n          const parentMsg = idMap[msg.parent];\n          if (parentMsg) {\n            // 直接用父消息的角色反转\n            role = parentMsg.role === 'user' ? 'assistant' : 'user';\n          } else {\n            role = 'assistant'; // fallback\n          }\n        }\n        msg.role = role; // 记录下来，供后续子消息判断\n        \n        // 处理时间戳\n        if (msg.inserted_at) {\n          timestamp = formatTimestamp(msg.inserted_at);\n        }\n        \n        // 处理内容\n        if (msg.content && typeof msg.content === 'string') {\n          const text = msg.content.trim();\n          if (text) {\n            const dialogue = `【${role}】${timestamp ? ` [${timestamp}]` : ''} ${text}`;\n            dialogues.push(dialogue);\n          }\n        }\n      }\n      \n      return dialogues;\n    }\n\n    // 添加时间戳转换函数\n    function formatTimestamp(timestamp) {\n      try {\n        let date;\n        if (typeof timestamp === 'number') {\n          // 处理Unix时间戳\n          date = new Date(timestamp * 1000);\n        } else if (typeof timestamp === 'string') {\n          // 处理ISO格式时间戳\n          date = new Date(timestamp);\n        } else {\n          return '';\n        }\n        \n        if (isNaN(date.getTime())) {\n          return '';\n        }\n        \n        // 转换为东八区时间\n        const utcDate = new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\n        const beijingDate = new Date(utcDate.getTime() + (8 * 60 * 60 * 1000));\n        \n        const year = beijingDate.getFullYear();\n        const month = String(beijingDate.getMonth() + 1).padStart(2, '0');\n        const day = String(beijingDate.getDate()).padStart(2, '0');\n        const hours = String(beijingDate.getHours()).padStart(2, '0');\n        const minutes = String(beijingDate.getMinutes()).padStart(2, '0');\n        const seconds = String(beijingDate.getSeconds()).padStart(2, '0');\n        \n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n      } catch (e) {\n        console.error('时间戳转换错误:', e);\n        return '';\n      }\n    }\n\n    function processRawJson(data) {\n      const outputs = [];\n      \n      // 检查是否为数组格式\n      if (Array.isArray(data)) {\n        const counter = {};\n        for (const item of data) {\n          // 检查是否为Claude格式\n          if (item.name !== undefined && item.chat_messages !== undefined) {\n            const name = item.name || \"Undefined\";\n            const chatMessages = item.chat_messages || [];\n            \n            if (!chatMessages.length) {\n              continue;\n            }\n            \n            const dialogues = [];\n            for (const msg of chatMessages) {\n              const sender = msg.sender;\n              const text = msg.text;\n              const timestamp = msg.created_at ? formatTimestamp(msg.created_at) : '';\n              if (sender && text) {\n                const role = sender === \"human\" ? \"user\" : \"assistant\";\n                dialogues.push(`【${role}】${timestamp ? ` [${timestamp}]` : ''} ${text}`);\n              }\n            }\n            \n            if (dialogues.length) {\n              const base = sanitizeFilename(name);\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            }\n          }\n          // 检查是否为DeepSeek格式（优先于ChatGPT）\n          else if (item.title !== undefined && item.mapping !== undefined) {\n            // 进一步验证是否为 DeepSeek 格式\n            const mapping = item.mapping;\n            let isDeepSeek = false;\n            \n            // 检查 mapping 中是否有 DeepSeek 特有的结构\n            for (const key in mapping) {\n              if (mapping[key].message && \n                  mapping[key].message.content && \n                  typeof mapping[key].message.content === 'string' &&\n                  mapping[key].id !== undefined) {\n                isDeepSeek = true;\n                break;\n              }\n            }\n            \n            if (isDeepSeek) {\n              const title = item.title || \"unknown\";\n              const dialogues = extractDialogueFromDeepSeekMapping(mapping);\n              if (!dialogues.length) continue;\n              const base = sanitizeFilename(title) || \"unknown\";\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            } else {\n              const title = item.title || \"unknown\";\n              const dialogues = extractDialogueFromMapping(mapping);\n              if (!dialogues.length) continue;\n              const base = sanitizeFilename(title) || \"unknown\";\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            }\n          } else {\n            // 未知格式\n          }\n        }\n        if (outputs.length === 0) {\n          throw new Error(\"未找到有效的对话内容\");\n        }\n        return outputs;\n      }\n      \n      // ChatGPT对象格式处理\n      if (typeof data === \"object\" && !Array.isArray(data)) {\n        for (const title in data) {\n          const content = data[title];\n          const mapping = content.mapping;\n          if (!mapping) continue;\n          const dialogues = extractDialogueFromMapping(mapping);\n          if (dialogues.length) {\n            const fn = sanitizeFilename(title) || \"unknown\";\n            const txt = dialogues.join(\"\\n\");\n            outputs.push({ filename: fn + \".txt\", content: txt });\n          }\n        }\n        if (outputs.length === 0) {\n          throw new Error(\"未找到有效的对话内容\");\n        }\n      } else {\n        throw new Error(\"不支持的 JSON 格式\");\n      }\n      return outputs;\n    }\n\n    function showFileContent(file) {\n      currentFile.value = file;\n      showModal.value = true;\n      exactTokens.value = null\n    }\n\n    function closeModal() {\n      showModal.value = false;\n      currentFile.value = null;\n    }\n\n    function handleSearch() {\n      if (!searchQuery.value.trim()) {\n        filteredOutputs.value = lastOutputs.value;\n        searchKeyword.value = ''\n        return;\n      }\n      const query = searchQuery.value.toLowerCase();\n      filteredOutputs.value = lastOutputs.value.filter(output => {\n        if (output.filename.toLowerCase().includes(query)) return true;\n        if (output.content.toLowerCase().includes(query)) return true;\n        return false;\n      });\n      searchKeyword.value = searchQuery.value.trim();\n    }\n\n    async function handleFileChange(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n      \n      status.value = \"正在解析文件...\";\n      const reader = new FileReader();\n      \n      reader.onload = function (e) {\n        try {\n          const data = JSON.parse(e.target.result);\n          const outputs = processRawJson(data);\n          lastOutputs.value = outputs;\n          filteredOutputs.value = outputs;\n          selectedFiles.value = outputs.map(() => false);\n          \n          if (outputs.length === 0) {\n            ElMessage.error(\"解析完成，但未找到对话内容\");\n            return;\n          }\n          \n          status.value = `解析完成，找到 ${outputs.length} 个会话`;\n        } catch (err) {\n          ElMessage.error(err.message || \"解析失败\");\n          status.value = \"解析失败\";\n        }\n      };\n      \n      reader.readAsText(file, \"utf-8\");\n    }\n\n    async function handleDownload() {\n      if (!selectedFiles.value.some(selected => selected)) return;\n      \n      try {\n        status.value = \"正在准备导出...\";\n        \n        const selectedOutputs = lastOutputs.value.filter((_, index) => selectedFiles.value[index]);\n        \n        if (selectedOutputs.length === 1) {\n          const blob = new Blob([selectedOutputs[0].content], { type: \"text/plain\" });\n          const url = URL.createObjectURL(blob);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = selectedOutputs[0].filename;\n          a.click();\n          URL.revokeObjectURL(url);\n          status.value = \"导出完成\";\n        } else {\n          status.value = \"正在打包文件，请稍候...\";\n          const zip = new JSZip();\n          \n          selectedOutputs.forEach(output => {\n            zip.file(output.filename, output.content);\n          });\n          \n          const content = await zip.generateAsync({type: \"blob\"});\n          const url = URL.createObjectURL(content);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = \"chatgpt_dialogues.zip\";\n          a.click();\n          URL.revokeObjectURL(url);\n          \n          status.value = `已导出 ${selectedOutputs.length} 个文件到 chatgpt_dialogues.zip`;\n        }\n      } catch (err) {\n        status.value = \"导出失败\";\n      }\n    }\n\n    const chatLines = computed(() => {\n      if (!currentFile.value?.content) return [];\n      \n      // 只匹配特定的角色标记\n      const rolePattern = /【(model_message|user_message|assistant|user)】/;\n      const lines = currentFile.value.content.split('\\n');\n      const messages = [];\n      let currentMessage = '';\n      let currentRole = '';\n\n      for (const line of lines) {\n        const match = line.match(rolePattern);\n        if (match) {\n          // 如果已经有消息，保存之前的消息\n          if (currentMessage) {\n            messages.push(`【${currentRole}】${currentMessage}`);\n          }\n          // 开始新的消息\n          currentRole = match[1];\n          currentMessage = line.replace(rolePattern, '').trim();\n        } else if (currentRole) {\n          // 如果不是角色标记，且当前有角色，则添加到当前消息\n          currentMessage += '\\n' + line;\n        }\n      }\n      \n      // 添加最后一条消息\n      if (currentMessage) {\n        messages.push(`【${currentRole}】${currentMessage}`);\n      }\n\n      return messages.filter(msg => {\n        const content = msg.replace(/^【.*?】\\s*/, '').trim();\n        return content.length > 0;\n      });\n    });\n\n    function getMessageClass(line) {\n      if (line.startsWith('【assistant】') || line.startsWith('【model_message】')) {\n        return 'message-left';\n      }\n      return 'message-right';\n    }\n\n    function isLeftMessage(line) {\n      return line.startsWith('【assistant】') || line.startsWith('【model_message】');\n    }\n\n    function convertToHalfWidth(text) {\n      if (!convertFullWidth.value) return text;\n      return text.replace(/[\\u2018\\u2019\\u201C\\u201D]/g, match => {\n        switch (match) {\n          case '\\u2018': // 左单引号\n          case '\\u2019': // 右单引号\n            return \"'\";\n          case '\\u201C': // 左双引号\n          case '\\u201D': // 右双引号\n            return '\"';\n          default:\n            return match;\n        }\n      });\n    }\n\n    function getMessageContent(line, lineIndex) {\n      let content = line.replace(/^【.*?】\\s*/, '').trim();\n      content = content.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]\\s*/, '');\n      const cleanContent = line.startsWith('【user_message】') \n        ? content.replace(/-{20,}/g, '')\n        : content;\n      let html = marked(convertToHalfWidth(cleanContent), { breaks: true });\n      \n      const timestampMatch = line.match(/\\[(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})\\]/);\n      if (timestampMatch) {\n        html = `<div class=\"message-timestamp\">${timestampMatch[1]}</div>${html}`;\n      }\n      \n      if (searchKeyword.value) {\n        const reg = new RegExp(searchKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n        let matchIdx = 0;\n        html = html.replace(reg, (m) => {\n          const refId = `search-match-${lineIndex}-${matchIdx}`;\n          matchIdx++;\n          return `<mark data-match-idx=\"${matchIdx-1}\" id=\"${refId}\">${m}</mark>`;\n        });\n      }\n      return html.replace(/\\s+$/, '').replace(/\\n$/, '');\n    }\n\n    const statistics = computed(() => {\n      if (!currentFile.value?.content) {\n        return {\n          totalTokens: 0,\n          assistantCount: 0,\n          userCount: 0\n        };\n      }\n\n      const lines = currentFile.value.content.split('\\n');\n      let totalTokens = 0;\n      let assistantCount = 0;\n      let userCount = 0;\n      let currentContent = '';\n      let currentRole = '';\n\n      const countTokens = (text) => {\n        text = text.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]\\s*/g, '');\n        text = text.replace(/https?:\\/\\/[^\\s]+/g, '');\n        \n        let count = 0;\n        \n        const tokens = text.match(/[a-zA-Z]+|[0-9]+|[\\u4e00-\\u9fa5]|[^\\s]/g) || [];\n        \n        for (const token of tokens) {\n          if (/[a-zA-Z]/.test(token)) {\n            count += Math.ceil(token.length / 4);\n          } else if (/[0-9]/.test(token)) {\n            count += Math.ceil(token.length / 2);\n          } else if (/[\\u4e00-\\u9fa5]/.test(token)) {\n            count += 1;\n          } else if (/[\\s.,!?;:'\"()\\-–—…]/.test(token)) {\n            count += 0.5;\n          } else {\n            count += 0.5;\n          }\n        }\n        \n        return Math.round(count);\n      };\n\n      for (const line of lines) {\n        if (line.startsWith('【assistant】') || line.startsWith('【model_message】')) {\n          if (currentContent && currentRole) {\n            totalTokens += countTokens(currentContent);\n            if (currentRole === 'assistant') assistantCount++;\n            else userCount++;\n          }\n          currentRole = 'assistant';\n          currentContent = line.replace(/^【.*?】\\s*/, '').trim();\n        } else if (line.startsWith('【user】') || line.startsWith('【user_message】')) {\n          if (currentContent && currentRole) {\n            totalTokens += countTokens(currentContent);\n            if (currentRole === 'assistant') assistantCount++;\n            else userCount++;\n          }\n          currentRole = 'user';\n          currentContent = line.replace(/^【.*?】\\s*/, '').trim();\n        } else if (currentRole) {\n          currentContent += '\\n' + line;\n        }\n      }\n      \n      if (currentContent && currentRole) {\n        totalTokens += countTokens(currentContent);\n        if (currentRole === 'assistant') assistantCount++;\n        else userCount++;\n      }\n\n      return {\n        totalTokens,\n        assistantCount,\n        userCount\n      };\n    });\n\n    onMounted(async () => {\n      await nextTick()\n      \n      setTimeout(async () => {\n        try {\n          await preloadEncoder()\n        } catch (error) {\n          console.error('Failed to preload encoder:', error)\n          ElMessage.error('加载失败，请刷新页面重试')\n        }\n      }, 100)\n    })\n\n    async function calculateExactTokens() {\n      if (!currentFile.value?.content) return\n      \n      isCalculating.value = true\n      exactTokens.value = null\n      \n      try {\n        // 使用处理后的消息内容计算token\n        const messages = chatLines.value\n        const content = messages.join('\\n')\n        \n        const tokens = await calculateTokens(content)\n        if (tokens !== null) {\n          exactTokens.value = tokens\n        }\n      } catch (error) {\n        console.error('Token calculation failed:', error)\n        ElMessage.error('计算token失败，请稍后重试')\n      } finally {\n        isCalculating.value = false\n      }\n    }\n\n    async function handleTxtFileChange(event) {\n      const files = event.target.files;\n      if (!files || !files.length) return;\n      let newOutputs = [];\n      for (const file of files) {\n        try {\n          const text = await file.text();\n          if (!text.trim()) {\n            ElMessage.error(`${file.name} 文件内容为空`);\n            continue;\n          }\n          \n          const lines = text.split('\\n');\n          const hasValidContent = lines.some(line => {\n            const trimmedLine = line.trim();\n            return trimmedLine && !trimmedLine.startsWith('-'.repeat(20));\n          });\n          \n          if (!hasValidContent) {\n            ElMessage.error(`${file.name} 未包含有效的对话内容`);\n            continue;\n          }\n\n          const hasDialogContent = lines.some(line => {\n            const trimmedLine = line.trim();\n            return trimmedLine && (\n              trimmedLine.startsWith('【assistant】') ||\n              trimmedLine.startsWith('【user】') ||\n              trimmedLine.startsWith('【model_message】') ||\n              trimmedLine.startsWith('【user_message】')\n            );\n          });\n\n          if (!hasDialogContent) {\n            ElMessage.error(`${file.name} 未包含有效的AI或用户对话内容`);\n            continue;\n          }\n          \n          newOutputs.push({ filename: file.name, content: text });\n        } catch (e) {\n          ElMessage.error(`读取${file.name}失败`);\n        }\n      }\n      if (newOutputs.length) {\n        lastOutputs.value = [...lastOutputs.value, ...newOutputs];\n        filteredOutputs.value = lastOutputs.value;\n        selectedFiles.value = lastOutputs.value.map(() => false);\n        status.value = `已导入 ${newOutputs.length} 个txt文件`;\n      }\n      event.target.value = '';\n    }\n\n    function updateMatchRefs() {\n      nextTick(() => {\n        matchRefs.value = Array.from(document.querySelectorAll('.modal-body mark[data-match-idx]'));\n        matchCount.value = matchRefs.value.length;\n        if (matchCount.value > 0) {\n          scrollToMatch(currentMatchIndex.value);\n        }\n      });\n    }\n\n    function scrollToMatch(idx) {\n      if (matchRefs.value[idx]) {\n        matchRefs.value[idx].scrollIntoView({ behavior: 'smooth', block: 'center' });\n        matchRefs.value.forEach((el, i) => {\n          el.classList.toggle('active-match', i === idx);\n        });\n      }\n    }\n\n    function gotoPrevMatch() {\n      if (matchCount.value <= 1) return;\n      currentMatchIndex.value = (currentMatchIndex.value - 1 + matchCount.value) % matchCount.value;\n      scrollToMatch(currentMatchIndex.value);\n    }\n\n    function gotoNextMatch() {\n      if (matchCount.value <= 1) return;\n      currentMatchIndex.value = (currentMatchIndex.value + 1) % matchCount.value;\n      scrollToMatch(currentMatchIndex.value);\n    }\n\n    watch([showModal, searchKeyword, currentFile], () => {\n      if (showModal.value) {\n        currentMatchIndex.value = 0;\n        updateMatchRefs();\n      }\n    });\n\n    return {\n      outputContent,\n      status,\n      canDownload,\n      lastOutputs,\n      selectedFiles,\n      isAllSelected,\n      showModal,\n      currentFile,\n      searchQuery,\n      filteredOutputs,\n      statistics,\n      handleFileChange,\n      handleDownload,\n      showFileContent,\n      closeModal,\n      toggleSelectAll,\n      updateSelection,\n      chatLines,\n      getMessageClass,\n      isLeftMessage,\n      getMessageContent,\n      handleSearch,\n      isCalculating,\n      exactTokens,\n      calculateExactTokens,\n      handleTxtFileChange,\n      searchKeyword,\n      matchCount,\n      currentMatchIndex,\n      gotoPrevMatch,\n      gotoNextMatch,\n      convertFullWidth\n    };\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: \"PingFang SC\", \"Microsoft YaHei\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin: 0;\n  padding: 0;\n  min-height: 100vh;\n  background-color: #f5f6fa;\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.container {\n  font-family: \"PingFang SC\", \"Microsoft YaHei\", sans-serif;\n  line-height: 1.6;\n  padding: 30px;\n  max-width: 800px;\n  margin: 20px auto;\n  background-color: #fff;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\nh1 {\n  color: #8e9aaf;\n  margin-bottom: 30px;\n  text-align: center;\n  font-size: 1.8em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\nh2 {\n  font-size: 1.3em;\n  margin-bottom: 15px;\n  color: #8e9aaf;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.file-input-container {\n  margin: 20px 0;\n  text-align: center;\n}\n\n.file-input-label {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background-color: #e8eaf6;\n  color: #7986cb;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.file-input-label:hover {\n  background-color: #c5cae9;\n  transform: translateY(-2px);\n}\n\ninput[type=\"file\"] {\n  display: none;\n}\n\n.file-list {\n  margin: 20px 0;\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 12px;\n  border: 1px solid #e8eaf6;\n  height: 50vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.search-container {\n  margin-bottom: 15px;\n}\n\n.search-container :deep(.el-input__wrapper) {\n  background-color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n}\n\n.search-container :deep(.el-input__inner) {\n  height: 40px;\n}\n\n.search-container :deep(.el-input__prefix) {\n  color: #9fa8da;\n}\n\n.file-list-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  border: 1px solid #e8eaf6;\n  border-radius: 8px;\n  background: white;\n}\n\n.select-all-container {\n  padding: 12px;\n  border-bottom: 1px solid #e8eaf6;\n  background-color: #f5f6fa;\n}\n\n.select-all-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  user-select: none;\n  color: #7986cb;\n  font-weight: 500;\n}\n\n.file-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 12px;\n  border-bottom: 1px solid #e8eaf6;\n  transition: all 0.2s ease;\n}\n\n.file-checkbox {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.file-name {\n  flex-grow: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  color: #5c6bc0;\n  word-break: break-word;\n  text-align: left;\n  min-width: 0;\n}\n\n.file-name .el-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.file-name:hover {\n  color: #7986cb;\n}\n\n.file-item:hover {\n  background-color: #f5f6fa;\n}\n\n.empty-state {\n  padding: 40px 20px;\n  text-align: center;\n  color: #9fa8da;\n  font-style: italic;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state .el-icon {\n  font-size: 24px;\n}\n\n.button-container {\n  text-align: center;\n  margin-top: 20px;\n}\n\nbutton {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background-color: #7986cb;\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\nbutton:hover {\n  background-color: #5c6bc0;\n  transform: translateY(-2px);\n}\n\nbutton:disabled {\n  background-color: #c5cae9;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.status {\n  margin-top: 15px;\n  text-align: center;\n  color: #9fa8da;\n  font-size: 0.9em;\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n\n.modal-content {\n  background-color: white;\n  border-radius: 16px;\n  width: 95%;\n  max-width: 800px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n}\n\n.modal-header {\n  padding: 20px;\n  border-bottom: 1px solid #e8eaf6;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.header-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #5c6bc0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  word-break: break-all;\n  font-size: 1.1em;\n  flex: 1;\n  min-width: 0;\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.statistics-note {\n  display: flex;\n  align-items: center;\n  color: #9fa8da;\n  cursor: help;\n  width: 32px;\n  height: 32px;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.statistics-note:hover {\n  color: #5c6bc0;\n  background-color: #f5f6fa;\n}\n\n.statistics-note .el-icon {\n  font-size: 16px;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #9fa8da;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  flex-shrink: 0;\n  width: 32px;\n  height: 32px;\n  border-radius: 4px;\n}\n\n.close-button:hover {\n  color: #5c6bc0;\n  background-color: #f5f6fa;\n}\n\n.statistics {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 0.9em;\n  color: #666;\n  flex-wrap: nowrap;\n}\n\n.stat-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n.stat-label {\n  color: #9fa8da;\n}\n\n.stat-value {\n  color: #5c6bc0;\n  font-weight: 500;\n}\n\n.token-calc {\n  margin-left: auto;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.modal-body {\n  padding: 20px;\n  overflow-y: auto;\n  flex-grow: 1;\n  background-color: #f5f6fa;\n}\n\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n  padding: 0 12px;\n}\n\n.message-wrapper {\n  display: flex;\n  gap: 12px;\n  width: 100%;\n  max-width: 100%;\n}\n\n.message-left {\n  align-self: flex-start;\n  padding-right: 20%;\n}\n\n.message-right {\n  align-self: flex-end;\n  flex-direction: row-reverse;\n  padding-left: 20%;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: #e8eaf6;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.message-bubble {\n  padding: 12px 16px;\n  border-radius: 16px;\n  font-size: 0.95em;\n  line-height: 1.5;\n  word-break: break-word;\n  white-space: pre-wrap;\n  text-align: left;\n  min-width: 60px;\n  max-width: 100%;\n  display: inline-block;\n  position: relative;\n  overflow-x: auto;\n  word-break: break-all;\n}\n\n.message-bubble ol {\n  padding-left: 1.2em;\n  list-style-position: outside;\n}\n\n.message-timestamp {\n  font-size: 0.8em;\n  color: #9fa8da;\n  margin-bottom: 4px;\n  opacity: 0.8;\n}\n\n.message-left .message-timestamp {\n  color: #9fa8da;\n}\n\n.message-right .message-timestamp {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.message-bubble :deep(p) {\n  margin: 8px 0;\n  word-break: break-word;\n}\n\n.message-bubble :deep(p:last-child) {\n  margin-bottom: 0;\n}\n\n.message-bubble :deep(p + p) {\n  margin-top: 1em;\n}\n\n.message-bubble :deep(em) {\n  font-style: italic;\n}\n\n.message-bubble :deep(strong) {\n  font-weight: bold;\n}\n\n.message-bubble :deep(code) {\n  background-color: rgba(0, 0, 0, 0.05);\n  padding: 2px 4px;\n  border-radius: 4px;\n  font-family: monospace;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.message-bubble :deep(pre) {\n  background-color: rgba(0, 0, 0, 0.05);\n  padding: 8px;\n  border-radius: 4px;\n  overflow-x: auto;\n  margin: 8px 0;\n  max-width: 100%;\n  white-space: pre;\n  word-wrap: normal;\n}\n\n.message-bubble :deep(pre code) {\n  background-color: transparent;\n  padding: 0;\n  white-space: pre;\n  word-wrap: normal;\n  overflow-x: auto;\n}\n\n.message-bubble :deep(ul),\n.message-bubble :deep(ol) {\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  list-style-position: inside;\n  padding-left: 1.5em;\n  overflow-x: unset;\n  word-break: break-all;\n}\n\n.message-bubble :deep(li) {\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  word-break: break-all;\n  white-space: pre-line;\n  overflow-wrap: break-word;\n}\n\n.message-bubble :deep(table) {\n  display: block;\n  width: 100%;\n  max-width: 100%;\n  overflow-x: auto;\n  word-break: break-all;\n}\n\n.message-bubble :deep(td),\n.message-bubble :deep(th) {\n  word-break: break-all;\n  white-space: pre-line;\n  max-width: 200px;\n}\n\n.message-bubble :deep(blockquote) {\n  border-left: 4px solid rgba(0, 0, 0, 0.1);\n  margin: 8px 0;\n  padding: 4px 12px;\n  color: rgba(0, 0, 0, 0.6);\n  background-color: rgba(0, 0, 0, 0.02);\n  border-radius: 0 4px 4px 0;\n}\n\n.message-left .message-bubble {\n  background-color: white;\n  color: #5c6bc0;\n  border: 1px solid #e8eaf6;\n  border-top-left-radius: 4px;\n}\n\n.message-right .message-bubble {\n  background-color: #7986cb;\n  color: white;\n  border-top-right-radius: 4px;\n}\n\n.message-bubble :deep(mark[data-match-idx]) {\n  background: #e8eaf6;\n  color: #5c6bc0;\n  padding: 0 2px;\n  border-radius: 2px;\n  transition: all 0.2s;\n}\n\n.message-bubble :deep(mark[data-match-idx].active-match) {\n  background: #c5cae9;\n  box-shadow: 0 0 0 2px #7986cb;\n}\n\n.search-nav {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  margin-top: 8px;\n  margin-bottom: 0;\n  width: 100%;\n}\n\n.search-nav button {\n  background: #e8eaf6;\n  color: #5c6bc0;\n  border: none;\n  border-radius: 6px;\n  padding: 4px 12px;\n  cursor: pointer;\n  font-size: 0.95em;\n  transition: all 0.2s;\n  min-width: 80px;\n}\n\n.search-nav button:disabled {\n  background: #f5f6fa;\n  color: #b0b0b0;\n  cursor: not-allowed;\n}\n\n.search-nav span {\n  min-width: 60px;\n  text-align: center;\n  color: #5c6bc0;\n}\n\n.token-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #e8eaf6;\n  color: #5c6bc0;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9em;\n  transition: all 0.2s ease;\n}\n\n.token-button:hover:not(:disabled) {\n  background-color: #c5cae9;\n  transform: translateY(-1px);\n}\n\n.token-button:disabled {\n  background-color: #f5f6fa;\n  color: #9fa8da;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.token-value {\n  color: #5c6bc0;\n  font-weight: 500;\n  margin-right: 4px;\n}\n\n.token-label {\n  color: #9fa8da;\n  font-size: 0.9em;\n}\n\n.is-loading {\n  animation: rotating 2s linear infinite;\n}\n\n@keyframes rotating {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .container {\n    padding: 20px;\n    margin: 15px auto;\n    border-radius: 12px;\n  }\n\n  .modal-content {\n    width: 100%;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n\n  .modal-header {\n    padding: 16px;\n    gap: 8px;\n  }\n\n  .header-top {\n    gap: 8px;\n  }\n\n  .close-button {\n    width: 28px;\n    height: 28px;\n  }\n\n  .statistics {\n    font-size: 0.85em;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n\n  .statistics > * {\n    flex: 1 1 auto;\n  }\n\n  .token-calc {\n    margin-left: 0;\n    margin-top: 8px;\n    width: 100%;\n    justify-content: flex-start;\n  }\n\n  .file-input-label {\n    padding: 8px 16px;\n    font-size: 0.9em;\n    gap: 6px;\n  }\n\n  .file-input-label + .file-input-label {\n    margin-left: 8px;\n  }\n\n  .statistics-row {\n    gap: 8px;\n  }\n\n  .stat-item {\n    gap: 2px;\n  }\n\n  .message-left {\n    padding-right: 5%;\n  }\n\n  .message-right {\n    padding-left: 5%;\n  }\n\n  .avatar {\n    width: 36px;\n    height: 36px;\n  }\n\n  .message-bubble {\n    font-size: 0.9em;\n    padding: 10px 14px;\n  }\n\n  .header-actions {\n    gap: 4px;\n  }\n\n  .statistics-note {\n    width: 28px;\n    height: 28px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.85em;\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .container {\n    padding: 15px;\n    margin: 10px auto;\n    border-radius: 8px;\n  }\n\n  .modal-header {\n    padding: 12px;\n  }\n\n  .close-button {\n    width: 24px;\n    height: 24px;\n  }\n\n  .statistics {\n    font-size: 0.8em;\n  }\n\n  .file-input-label {\n    padding: 6px 12px;\n    font-size: 0.85em;\n    gap: 4px;\n  }\n\n  .file-input-label + .file-input-label {\n    margin-left: 6px;\n  }\n\n  .statistics-row {\n    gap: 6px;\n  }\n\n  .stat-item {\n    font-size: 0.85em;\n  }\n\n  .token-calc {\n    gap: 4px;\n  }\n\n  .message-left {\n    padding-right: 2%;\n  }\n\n  .message-right {\n    padding-left: 2%;\n  }\n\n  .avatar {\n    width: 32px;\n    height: 32px;\n  }\n\n  .message-bubble {\n    font-size: 0.85em;\n    padding: 8px 12px;\n  }\n\n  .statistics-note {\n    width: 24px;\n    height: 24px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.8em;\n  }\n}\n\n.modal-body::-webkit-scrollbar {\n  width: 6px;\n}\n\n.modal-body::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.modal-body::-webkit-scrollbar-thumb {\n  background: #c5cae9;\n  border-radius: 3px;\n}\n\n.modal-body::-webkit-scrollbar-thumb:hover {\n  background: #9fa8da;\n}\n\n/* 极端防溢出方案 */\n.message-bubble,\n.message-bubble * {\n  max-width: 100% !important;\n  box-sizing: border-box !important;\n  word-break: break-all !important;\n  overflow-wrap: break-word !important;\n  white-space: pre-line !important;\n}\n\n.message-bubble :deep(pre),\n.message-bubble :deep(code) {\n  white-space: pre-wrap !important;\n  word-break: break-all !important;\n  overflow-x: auto !important;\n}\n\n.message-bubble :deep(table) {\n  display: block !important;\n  width: 100% !important;\n  overflow-x: auto !important;\n}\n\n.message-bubble :deep(td),\n.message-bubble :deep(th) {\n  max-width: 120px !important;\n  word-break: break-all !important;\n  white-space: pre-line !important;\n}\n\n/* 终极li防溢出方案 */\n.message-bubble li,\n.message-bubble :deep(li) {\n  white-space: normal !important;\n  overflow-wrap: anywhere !important;\n  word-break: break-all !important;\n  max-width: 100% !important;\n  box-sizing: border-box !important;\n}\n\n.chat-container,\n.message-wrapper,\n.modal-body {\n  max-width: 100% !important;\n  width: 100% !important;\n  box-sizing: border-box !important;\n  overflow-x: hidden !important;\n}\n\n.message-bubble ol,\n.message-bubble ul,\n.message-bubble li,\n.message-bubble p,\n.message-bubble :deep(ol),\n.message-bubble :deep(ul),\n.message-bubble :deep(li),\n.message-bubble :deep(p) {\n  max-width: 100% !important;\n  width: 100% !important;\n  box-sizing: border-box !important;\n  word-break: break-all !important;\n  overflow-wrap: anywhere !important;\n  white-space: normal !important;\n  display: block !important;\n}\n\n.message-bubble .task-list-item {\n  max-width: 100% !important;\n  width: 100% !important;\n  word-break: break-all !important;\n  overflow-wrap: anywhere !important;\n  white-space: normal !important;\n}\n\n.option-container {\n  margin-top: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #f5f6fa;\n  padding: 6px 12px;\n  border-radius: 6px;\n  border: 1px solid #e8eaf6;\n}\n\n.option-container :deep(.el-switch) {\n  --el-switch-on-color: #7986cb;\n  --el-switch-off-color: #c5cae9;\n  height: 20px;\n}\n\n.option-container :deep(.el-switch__core) {\n  border-color: #c5cae9;\n  height: 20px;\n  width: 40px !important;\n}\n\n.option-container :deep(.el-switch__action) {\n  width: 16px;\n  height: 16px;\n}\n\n.option-container :deep(.el-switch__label) {\n  color: #7986cb;\n  font-size: 0.85em;\n  font-weight: 500;\n  line-height: 20px;\n}\n\n.option-container :deep(.el-switch__label.is-active) {\n  color: #5c6bc0;\n}\n\n@media screen and (max-width: 768px) {\n  .option-container {\n    margin-top: 8px;\n    padding: 4px 10px;\n  }\n  \n  .option-container :deep(.el-switch__label) {\n    font-size: 0.8em;\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .option-container {\n    margin-top: 6px;\n    padding: 3px 8px;\n  }\n  \n  .option-container :deep(.el-switch__label) {\n    font-size: 0.75em;\n  }\n}\n</style>\n","import { encode } from 'gpt-tokenizer/model/gpt-4o'\r\n\r\nlet encoder = null\r\n\r\n// 预加载编码器\r\nexport async function preloadEncoder() {\r\n  if (!encoder) {\r\n    encoder = encode\r\n  }\r\n  return encoder\r\n}\r\n\r\n// 计算文本的 token 数量\r\nexport async function calculateTokens(text) {\r\n  try {\r\n    if (!encoder) {\r\n      await preloadEncoder()\r\n    }\r\n\r\n    // 按行分割文本\r\n    const lines = text.split('\\n')\r\n    let totalTokens = 0\r\n    let currentContent = ''\r\n    let currentRole = ''\r\n\r\n    for (const line of lines) {\r\n      // 只匹配 user 和 assistant\r\n      if (line.startsWith('【assistant】')) {\r\n        // 如果之前有内容，先计算之前的token\r\n        if (currentContent && currentRole) {\r\n          // 移除时间戳\r\n          const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n          const tokens = encoder(cleanContent)\r\n          // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n          totalTokens += tokens.length\r\n        }\r\n        // 开始新的内容\r\n        currentRole = 'assistant'\r\n        currentContent = line.replace(/^【.*?】\\s*/, '').trim()\r\n      } else if (line.startsWith('【user】')) {\r\n        // 如果之前有内容，先计算之前的token\r\n        if (currentContent && currentRole) {\r\n          // 移除时间戳\r\n          const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n          const tokens = encoder(cleanContent)\r\n          // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n          totalTokens += tokens.length\r\n        }\r\n        // 开始新的内容\r\n        currentRole = 'user'\r\n        currentContent = line.replace(/^【.*?】\\s*/, '').trim()\r\n      } else if (currentRole) {\r\n        // 如果不是角色标记，且当前有角色，则添加到当前内容\r\n        currentContent += '\\n' + line\r\n      }\r\n    }\r\n    \r\n    // 处理最后一条消息\r\n    if (currentContent && currentRole) {\r\n      // 移除时间戳\r\n      const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n      const tokens = encoder(cleanContent)\r\n      // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n      totalTokens += tokens.length\r\n    }\r\n\r\n    console.log(`总计 Token 数量：${totalTokens}`)\r\n    return totalTokens\r\n  } catch (error) {\r\n    console.error('Token calculation failed:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// 获取编码器实例\r\nexport function getEncoder() {\r\n  return encoder\r\n} ","import { render } from \"./App.vue?vue&type=template&id=2ea1207d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2ea1207d&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkchatlog_parser\"] = self[\"webpackChunkchatlog_parser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(636); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","for","style","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_icon","_component_ChatDotRound","_hoisted_2","_hoisted_3","_component_Upload","type","id","accept","onChange","_cache","args","$setup","handleFileChange","_hoisted_4","multiple","handleTxtFileChange","_hoisted_5","_component_el_switch","convertFullWidth","$event","_hoisted_6","_component_Document","_hoisted_7","_component_el_input","searchQuery","placeholder","_ctx","Search","clearable","onInput","handleSearch","prefix","_withCtx","_component_Search","_hoisted_8","lastOutputs","length","_hoisted_9","_hoisted_10","checked","isAllSelected","toggleSelectAll","_component_Select","_hoisted_12","_Fragment","_renderList","filteredOutputs","output","index","key","_hoisted_13","selectedFiles","updateSelection","onClick","showFileContent","_component_ChatLineRound","_toDisplayString","filename","_hoisted_16","_component_UploadFilled","showModal","_withModifiers","closeModal","_hoisted_17","_hoisted_18","_hoisted_19","currentFile","_hoisted_20","_hoisted_21","_component_el_tooltip","effect","content","placement","_component_InfoFilled","_component_Close","_hoisted_22","_hoisted_23","_hoisted_24","statistics","totalTokens","_hoisted_25","_hoisted_26","assistantCount","_hoisted_27","_hoisted_28","userCount","_hoisted_29","calculateExactTokens","disabled","isCalculating","_createBlock","_component_Loading","exactTokens","_hoisted_31","_hoisted_32","searchKeyword","matchCount","_hoisted_33","gotoPrevMatch","_hoisted_34","currentMatchIndex","gotoNextMatch","_hoisted_35","_hoisted_36","_hoisted_37","chatLines","line","_normalizeClass","getMessageClass","_hoisted_38","isLeftMessage","_component_User","innerHTML","getMessageContent","_hoisted_40","handleDownload","canDownload","_component_Download","status","encoder","async","preloadEncoder","encode","calculateTokens","text","lines","split","currentContent","currentRole","startsWith","cleanContent","replace","trim","tokens","console","log","error","marked","setOptions","breaks","gfm","headerIds","mangle","pedantic","smartLists","smartypants","name","components","ChatDotRound","Upload","Document","Select","ChatLineRound","UploadFilled","Close","Download","User","InfoFilled","Loading","setup","outputContent","ref","computed","value","some","selected","matchRefs","every","event","target","map","sanitizeFilename","extractDialogueFromMapping","mapping","dialogues","randomKey","msg","message","role","author","includes","parts","join","timestamp","create_time","Date","formattedTime","toLocaleString","year","month","day","hour","minute","second","hour12","push","metadata","userData","user_context_message_data","aboutModel","about_model_message","aboutUser","about_user_message","added","repeat","e","extractDialogueFromDeepSeekMapping","messages","item","parent","inserted_at","sort","a","b","idMap","forEach","parentMsg","formatTimestamp","dialogue","date","isNaN","getTime","utcDate","getTimezoneOffset","beijingDate","getFullYear","String","getMonth","padStart","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","processRawJson","data","outputs","Array","isArray","counter","undefined","chat_messages","chatMessages","sender","created_at","base","count","fn","title","isDeepSeek","Error","txt","file","query","toLowerCase","filter","files","reader","FileReader","onload","JSON","parse","result","ElMessage","err","readAsText","selectedOutputs","_","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","zip","JSZip","generateAsync","rolePattern","currentMessage","match","convertToHalfWidth","lineIndex","html","timestampMatch","reg","RegExp","matchIdx","m","refId","countTokens","token","test","Math","ceil","round","newOutputs","hasValidContent","trimmedLine","hasDialogContent","updateMatchRefs","nextTick","from","querySelectorAll","scrollToMatch","idx","scrollIntoView","behavior","block","el","i","classList","toggle","onMounted","setTimeout","watch","__exports__","render","app","createApp","App","use","ElementPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}