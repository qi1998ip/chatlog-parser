{"version":3,"file":"js/app.4f8bec94.js","mappings":"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","sources":["webpack://chatlog_parser/./src/App.vue","webpack://chatlog_parser/./src/utils/tokenizerLoader.js","webpack://chatlog_parser/./src/App.vue?7ccd","webpack://chatlog_parser/./src/main.js","webpack://chatlog_parser/webpack/bootstrap","webpack://chatlog_parser/webpack/runtime/chunk loaded","webpack://chatlog_parser/webpack/runtime/compat get default export","webpack://chatlog_parser/webpack/runtime/define property getters","webpack://chatlog_parser/webpack/runtime/global","webpack://chatlog_parser/webpack/runtime/hasOwnProperty shorthand","webpack://chatlog_parser/webpack/runtime/jsonp chunk loading","webpack://chatlog_parser/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1><el-icon><ChatDotRound /></el-icon> 某种聊天记录</h1>\n    <div class=\"file-input-container\">\n      <label for=\"fileInput\" class=\"file-input-label\">\n        <el-icon><Upload /></el-icon>\n        选择 JSON 文件\n      </label>\n      <input type=\"file\" id=\"fileInput\" accept=\".json\" @change=\"handleFileChange\">\n      <label for=\"txtFileInput\" class=\"file-input-label\" style=\"margin-left: 12px;\">\n        <el-icon><Upload /></el-icon>\n        上传聊天txt\n      </label>\n      <input type=\"file\" id=\"txtFileInput\" accept=\".txt\" multiple @change=\"handleTxtFileChange\">\n    </div>\n    \n    <!-- 文件列表 -->\n    <div class=\"file-list\">\n      <h2><el-icon><Document /></el-icon> 聊天窗口列表</h2>\n      <div class=\"search-container\">\n        <el-input\n          v-model=\"searchQuery\"\n          placeholder=\"搜索聊天记录...\"\n          :prefix-icon=\"Search\"\n          clearable\n          @input=\"handleSearch\"\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n      </div>\n      <div class=\"file-list-content\">\n        <div v-if=\"lastOutputs.length > 0\" class=\"select-all-container\">\n          <label class=\"select-all-label\">\n            <input \n              type=\"checkbox\" \n              :checked=\"isAllSelected\" \n              @change=\"toggleSelectAll\"\n            >\n            <el-icon><Select /></el-icon>\n            选择所有\n          </label>\n        </div>\n        <ul v-if=\"lastOutputs.length > 0\">\n          <li v-for=\"(output, index) in filteredOutputs\" \n              :key=\"index\" \n              class=\"file-item\">\n            <label class=\"file-checkbox\">\n              <input \n                type=\"checkbox\" \n                v-model=\"selectedFiles[index]\"\n                @change=\"updateSelection\"\n              >\n            </label>\n            <span class=\"file-name\" @click=\"showFileContent(output)\">\n              <el-icon><ChatLineRound /></el-icon>\n              {{ output.filename }}\n            </span>\n          </li>\n        </ul>\n        <div v-else class=\"empty-state\">\n          <el-icon><UploadFilled /></el-icon>\n          请上传 conversation.json 文件 以查看聊天记录\n        </div>\n      </div>\n    </div>\n\n    <!-- 弹窗 -->\n    <div class=\"modal\" v-if=\"showModal\" @click.self=\"closeModal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <div class=\"header-top\">\n          <h3><el-icon><Document /></el-icon> {{ currentFile?.filename }}</h3>\n            <div class=\"header-actions\">\n              <div class=\"statistics-note\">\n                <el-tooltip\n                  effect=\"dark\"\n                  content=\"精确计算采用GPT官方分词器tokenizer-GPT 4o，不适用于Claude。考虑到聊天内容还包含文件、图片等无法被提取的内容，token计算结果仅供参考。\"\n                  placement=\"bottom\"\n                >\n                  <el-icon><InfoFilled /></el-icon>\n                </el-tooltip>\n              </div>\n          <button class=\"close-button\" @click=\"closeModal\">\n            <el-icon><Close /></el-icon>\n          </button>\n            </div>\n          </div>\n          <div class=\"statistics\">\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">总字数：</span>\n              <span class=\"stat-value\">{{ statistics.totalTokens }}</span>\n            </div>\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">AI回复：</span>\n              <span class=\"stat-value\">{{ statistics.assistantCount }}次</span>\n            </div>\n            <div class=\"stat-item\" style=\"width: 120px\">\n              <span class=\"stat-label\">用户消息：</span>\n              <span class=\"stat-value\">{{ statistics.userCount }}次</span>\n            </div>\n            <div class=\"export-current\">\n              <button \n                class=\"mode-toggle-button\" \n                @click=\"toggleSelectMode\"\n                :title=\"isSelectMode ? '退出选择模式' : '进入选择模式'\"\n              >\n                <el-icon><Select /></el-icon>\n                {{ isSelectMode ? '退出选择' : '选择消息' }}\n              </button>\n              <template v-if=\"isSelectMode\">\n                <button \n                  class=\"select-all-button\" \n                  @click=\"toggleSelectAllMessages\"\n                  :title=\"isAllMessagesSelected ? '取消全选' : '全选消息'\"\n                >\n                  <el-icon><Select /></el-icon>\n                  {{ isAllMessagesSelected ? '取消全选' : '全选' }}\n                </button>\n                <button \n                  class=\"export-button\" \n                  @click=\"exportSelectedMessages\"\n                  :disabled=\"!hasSelectedMessages\"\n                  title=\"导出选中的消息\"\n                >\n                  <el-icon><Download /></el-icon>\n                  导出选中 ({{ selectedMessagesCount }})\n                </button>\n              </template>\n            </div>\n            <div v-if=\"!isSelectMode\" class=\"token-calc\">\n              <button \n                class=\"token-button\" \n                @click=\"calculateExactTokens\"\n                :disabled=\"isCalculating\"\n              >\n                <el-icon v-if=\"!isCalculating\"><InfoFilled /></el-icon>\n                <el-icon v-else class=\"is-loading\"><Loading /></el-icon>\n                {{ isCalculating ? '计算中...' : '计算精确Token' }}\n              </button>\n              <span v-if=\"exactTokens !== null\" class=\"stat-value\">\n                <span class=\"token-value\">{{ exactTokens }}</span>\n                <span class=\"token-label\">tokens</span>\n              </span>\n            </div>\n          </div>\n          <!-- 搜索高亮导航 -->\n          <div v-if=\"searchKeyword && matchCount > 0\" class=\"search-nav\">\n            <button @click=\"gotoPrevMatch\" :disabled=\"matchCount <= 1\">上一个</button>\n            <span>{{ currentMatchIndex + 1 }} / {{ matchCount }}</span>\n            <button @click=\"gotoNextMatch\" :disabled=\"matchCount <= 1\">下一个</button>\n          </div>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"chat-container\">\n            <template v-for=\"(line, index) in chatLines\" :key=\"index\">\n              <div class=\"message-container\" :class=\"{ 'selected': isSelectMode && selectedMessages[index] }\">\n                <div v-if=\"isSelectMode\" class=\"message-checkbox\">\n                  <input \n                    type=\"checkbox\" \n                    v-model=\"selectedMessages[index]\"\n                    :id=\"`msg-${index}`\"\n                  />\n                  <label :for=\"`msg-${index}`\"></label>\n                </div>\n                <div :class=\"['message-wrapper', getMessageClass(line)]\">\n                  <div class=\"avatar\">\n                    <el-icon v-if=\"isLeftMessage(line)\" ><ChatDotRound /></el-icon>\n                    <el-icon v-else><User /></el-icon>\n                  </div>\n                  <div class=\"message-bubble\" v-html=\"getMessageContent(line, index)\" />\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"button-container\">\n      <button @click=\"handleDownload\" :disabled=\"!canDownload\">\n        <el-icon><Download /></el-icon>\n        导出选中对话\n      </button>\n    </div>\n    <div class=\"status\" v-text=\"status\"></div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, watch } from 'vue'\nimport JSZip from 'jszip'\nimport { marked } from 'marked'\nimport { ElMessage } from 'element-plus'\nimport { \n  ChatDotRound, \n  Upload, \n  Document, \n  Select, \n  ChatLineRound, \n  UploadFilled, \n  Close, \n  Download,\n  User,\n  Search,\n  InfoFilled,\n  Loading\n} from '@element-plus/icons-vue'\nimport { preloadEncoder, calculateTokens } from '@/utils/tokenizerLoader'\n\n// 配置 marked 允许 HTML 标签\nmarked.setOptions({\n  breaks: true,\n  gfm: true,\n  headerIds: false,\n  mangle: false,\n  pedantic: false,\n  smartLists: true,\n  smartypants: false\n});\n\nexport default {\n  name: 'App',\n  components: {\n    ChatDotRound,\n    Upload,\n    Document,\n    Select,\n    ChatLineRound,\n    UploadFilled,\n    Close,\n    Download,\n    User,\n    Search,\n    InfoFilled,\n    Loading\n  },\n  setup() {\n    const outputContent = ref('聊天记录将在这里显示');\n    const status = ref('');\n    const lastOutputs = ref([]);\n    const selectedFiles = ref([]);\n    const searchQuery = ref('');\n    const filteredOutputs = ref([]);\n    const canDownload = computed(() => selectedFiles.value.some(selected => selected));\n    const showModal = ref(false);\n    const currentFile = ref(null);\n    const isCalculating = ref(false)\n    const exactTokens = ref(null)\n    const searchKeyword = ref('')\n    const matchCount = ref(0)\n    const currentMatchIndex = ref(0)\n    const matchRefs = ref([])\n    \n    // 新增：用于跟踪选中的消息\n    const selectedMessages = ref([])\n    const isSelectMode = ref(false)\n\n    const isAllSelected = computed(() => {\n      return lastOutputs.value.length > 0 && \n             selectedFiles.value.every(selected => selected);\n    });\n\n    // 新增：计算属性 - 是否所有消息都被选中\n    const isAllMessagesSelected = computed(() => {\n      return chatLines.value.length > 0 && \n             selectedMessages.value.length === chatLines.value.length &&\n             selectedMessages.value.every(selected => selected);\n    });\n\n    // 新增：计算属性 - 选中消息的数量\n    const selectedMessagesCount = computed(() => {\n      return selectedMessages.value.filter(selected => selected).length;\n    });\n\n    // 新增：计算属性 - 是否有选中的消息\n    const hasSelectedMessages = computed(() => {\n      return selectedMessagesCount.value > 0;\n    });\n\n    function toggleSelectAll(event) {\n      const checked = event.target.checked;\n      selectedFiles.value = lastOutputs.value.map(() => checked);\n    }\n\n    function updateSelection() {\n      // 当手动选择文件时，更新选择状态\n      selectedFiles.value = [...selectedFiles.value];\n    }\n\n    function sanitizeFilename(filename) {\n      return filename.replace(/[\\\\/*?:\"<>|]/g, \"\");\n    }\n\n    function extractDialogueFromMapping(mapping) {\n      const dialogues = [];\n      // 添加空值检查\n      if (!mapping || typeof mapping !== 'object') {\n        return dialogues;\n      }\n      \n      for (const randomKey in mapping) {\n        try {\n          const item = mapping[randomKey];\n          if (!item || !item.message) continue;\n          \n          const msg = item.message;\n          const role = msg.author?.role || \"unknown\";\n          if (![\"user\", \"assistant\"].includes(role)) continue;\n          const content = msg.content || {};\n          let timestamp = '';\n          \n          // 处理时间戳\n          if (msg.create_time) {\n            timestamp = formatTimestamp(msg.create_time);\n          } else if (msg.created_at) {\n            timestamp = formatTimestamp(msg.created_at);\n          }\n          \n          if (content.parts && content.parts.length) {\n            const text = content.parts.join(\" \").replace(/^\"|\"$/g, \"\").trim();\n            if (text) {\n              dialogues.push(`【${role}】${timestamp ? ` [${timestamp}]` : ''} ${text}`);\n            }\n          } else if (role === \"user\") {\n            const metadata = msg.metadata || {};\n            const userData = metadata.user_context_message_data || {};\n            const aboutModel = (userData.about_model_message || \"\").trim();\n            const aboutUser = (userData.about_user_message || \"\").trim();\n            let added = false;\n            if (aboutModel) {\n              dialogues.push(`【model_message】${timestamp ? ` [${timestamp}]` : ''} ${aboutModel}`);\n              added = true;\n            }\n            if (aboutUser) {\n              dialogues.push(`【user_message】${timestamp ? ` [${timestamp}]` : ''} ${aboutUser}`);\n              added = true;\n            }\n            if (added) {\n              dialogues.push(\"-\".repeat(80));\n            }\n          }\n        } catch (e) {\n          console.log(`处理 mapping 内随机键 ${randomKey} 时出错：${e}`);\n        }\n      }\n      return dialogues;\n    }\n\n    function extractDialogueFromDeepSeekMapping(mapping) {\n      const dialogues = [];\n      const messages = [];\n      \n      // 添加空值检查\n      if (!mapping || typeof mapping !== 'object') {\n        return dialogues;\n      }\n      \n      // 首先收集所有消息\n      for (const key in mapping) {\n          const item = mapping[key];\n          if (item && item.message) {\n            const msg = item.message;\n            \n            // 检查新格式：fragments 下的 content 和 type\n            if (msg.fragments && Array.isArray(msg.fragments)) {\n              for (const fragment of msg.fragments) {\n                if (fragment.content && fragment.type) {\n                  let role = '';\n                  if (fragment.type === 'RESPONSE') {\n                    role = 'assistant';\n                  } else if (fragment.type === 'REQUEST') {\n                    role = 'user';\n                  } else {\n                    continue; // 跳过未知类型\n                  }\n                  \n                  messages.push({\n                    id: item.id,\n                    parent: item.parent,\n                    content: fragment.content,\n                    role: role,\n                    inserted_at: msg.inserted_at\n                  });\n                }\n              }\n            }\n            // 兼容旧格式：直接在 message.content 中\n            else if (msg.content && typeof msg.content === 'string') {\n              messages.push({\n                id: item.id,\n                parent: item.parent,\n                content: msg.content,\n                inserted_at: msg.inserted_at\n              });\n            }\n          }\n      }\n      \n      // 按时间排序\n      messages.sort((a, b) => {\n        if (a.inserted_at && b.inserted_at) {\n          return new Date(a.inserted_at) - new Date(b.inserted_at);\n        }\n        return 0;\n      });\n      \n      // 先构建id到消息的映射（仅用于旧格式的角色判断）\n      const idMap = {};\n      messages.forEach(msg => { idMap[msg.id] = msg; });\n\n      // 构建对话\n      for (const msg of messages) {\n        let role = msg.role || ''; // 新格式已经有角色信息\n        let timestamp = '';\n        \n        // 如果没有角色信息（旧格式），则通过父子关系判断\n        if (!role) {\n          if (msg.parent === 'root') {\n            role = 'user';\n          } else {\n            const parentMsg = idMap[msg.parent];\n            if (parentMsg) {\n              // 直接用父消息的角色反转\n              role = parentMsg.role === 'user' ? 'assistant' : 'user';\n            } else {\n              role = 'assistant'; // fallback\n            }\n          }\n          msg.role = role; // 记录下来，供后续子消息判断\n        }\n        \n        // 处理时间戳\n        if (msg.inserted_at) {\n          timestamp = formatTimestamp(msg.inserted_at);\n        }\n        \n        // 处理内容\n        if (msg.content && typeof msg.content === 'string') {\n          const text = msg.content.trim();\n          if (text) {\n            const dialogue = `【${role}】${timestamp ? ` [${timestamp}]` : ''} ${text}`;\n            dialogues.push(dialogue);\n          }\n        }\n      }\n      \n      return dialogues;\n    }\n\n    // 添加时间戳转换函数\n    function formatTimestamp(timestamp) {\n      try {\n        let date;\n        if (typeof timestamp === 'number') {\n          // 处理Unix时间戳\n          date = new Date(timestamp * 1000);\n        } else if (typeof timestamp === 'string') {\n          // 处理ISO格式时间戳\n          date = new Date(timestamp);\n        } else {\n          return '';\n        }\n        \n        if (isNaN(date.getTime())) {\n          return '';\n        }\n        \n        // 转换为东八区时间\n        const utcDate = new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\n        const beijingDate = new Date(utcDate.getTime() + (8 * 60 * 60 * 1000));\n        \n        const year = beijingDate.getFullYear();\n        const month = String(beijingDate.getMonth() + 1).padStart(2, '0');\n        const day = String(beijingDate.getDate()).padStart(2, '0');\n        const hours = String(beijingDate.getHours()).padStart(2, '0');\n        const minutes = String(beijingDate.getMinutes()).padStart(2, '0');\n        const seconds = String(beijingDate.getSeconds()).padStart(2, '0');\n        \n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n      } catch (e) {\n        console.error('时间戳转换错误:', e);\n        return '';\n      }\n    }\n\n    function processRawJson(data) {\n      const outputs = [];\n      \n      // 检查是否为数组格式\n      if (Array.isArray(data)) {\n        const counter = {};\n        for (const item of data) {\n          // 检查是否为Claude格式\n          if (item.name !== undefined && item.chat_messages !== undefined) {\n            const name = item.name || \"Undefined\";\n            const chatMessages = item.chat_messages || [];\n            \n            if (!chatMessages.length) {\n              continue;\n            }\n            \n            const dialogues = [];\n            for (const msg of chatMessages) {\n              const sender = msg.sender;\n              const text = msg.text;\n              const timestamp = msg.created_at ? formatTimestamp(msg.created_at) : '';\n              if (sender && text) {\n                const role = sender === \"human\" ? \"user\" : \"assistant\";\n                dialogues.push(`【${role}】${timestamp ? ` [${timestamp}]` : ''} ${text}`);\n              }\n            }\n            \n            if (dialogues.length) {\n              const base = sanitizeFilename(name);\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            }\n          }\n          // 检查是否为DeepSeek格式（优先于ChatGPT）\n          else if (item.title !== undefined && item.mapping !== undefined) {\n            // 进一步验证是否为 DeepSeek 格式\n            const mapping = item.mapping;\n            // 添加空值检查\n            if (!mapping || typeof mapping !== 'object') continue;\n            let isDeepSeek = false;\n            \n            // 检查 mapping 中是否有 DeepSeek 特有的结构\n            for (const key in mapping) {\n              if (mapping[key] && mapping[key].message) {\n                const msg = mapping[key].message;\n                // 检查新格式：fragments 结构\n                if (msg.fragments && Array.isArray(msg.fragments) && \n                    msg.fragments.some(f => f.content && f.type && \n                    (f.type === 'RESPONSE' || f.type === 'REQUEST'))) {\n                  isDeepSeek = true;\n                  break;\n                }\n                // 兼容旧格式：直接在 message.content 中\n                else if (msg.content && typeof msg.content === 'string' &&\n                         mapping[key].id !== undefined) {\n                  isDeepSeek = true;\n                  break;\n                }\n              }\n            }\n            \n            if (isDeepSeek) {\n              const title = item.title || \"unknown\";\n              const dialogues = extractDialogueFromDeepSeekMapping(mapping);\n              if (!dialogues.length) continue;\n              const base = sanitizeFilename(title) || \"unknown\";\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            } else {\n              const title = item.title || \"unknown\";\n              const dialogues = extractDialogueFromMapping(mapping);\n              if (!dialogues.length) continue;\n              const base = sanitizeFilename(title) || \"unknown\";\n              const count = (counter[base] || 0) + 1;\n              counter[base] = count;\n              const fn = count > 1 ? `${base}_${count}.txt` : `${base}.txt`;\n              outputs.push({ filename: fn, content: dialogues.join(\"\\n\") });\n            }\n          } else {\n            // 未知格式\n          }\n        }\n        if (outputs.length === 0) {\n          throw new Error(\"未找到有效的对话内容\");\n        }\n        return outputs;\n      }\n      \n      // ChatGPT对象格式处理\n      if (typeof data === \"object\" && !Array.isArray(data)) {\n        for (const title in data) {\n          const content = data[title];\n          // 添加空值检查\n          if (!content || typeof content !== 'object') continue;\n          const mapping = content.mapping;\n          if (!mapping) continue;\n          const dialogues = extractDialogueFromMapping(mapping);\n          if (dialogues.length) {\n            const fn = sanitizeFilename(title) || \"unknown\";\n            const txt = dialogues.join(\"\\n\");\n            outputs.push({ filename: fn + \".txt\", content: txt });\n          }\n        }\n        if (outputs.length === 0) {\n          throw new Error(\"未找到有效的对话内容\");\n        }\n      } else {\n        throw new Error(\"不支持的 JSON 格式\");\n      }\n      return outputs;\n    }\n\n    function showFileContent(file) {\n      currentFile.value = file;\n      showModal.value = true;\n      exactTokens.value = null;\n      // 重置选择模式\n      isSelectMode.value = false;\n      selectedMessages.value = [];\n    }\n\n    function closeModal() {\n      showModal.value = false;\n      currentFile.value = null;\n      // 重置选择模式\n      isSelectMode.value = false;\n      selectedMessages.value = [];\n    }\n\n    function handleSearch() {\n      if (!searchQuery.value.trim()) {\n        filteredOutputs.value = lastOutputs.value;\n        searchKeyword.value = ''\n        return;\n      }\n      const query = searchQuery.value.toLowerCase();\n      filteredOutputs.value = lastOutputs.value.filter(output => {\n        if (output.filename.toLowerCase().includes(query)) return true;\n        if (output.content.toLowerCase().includes(query)) return true;\n        return false;\n      });\n      searchKeyword.value = searchQuery.value.trim();\n    }\n\n    async function handleFileChange(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n      \n      status.value = \"正在解析文件...\";\n      const reader = new FileReader();\n      \n      reader.onload = function (e) {\n        try {\n          const data = JSON.parse(e.target.result);\n          const outputs = processRawJson(data);\n          lastOutputs.value = outputs;\n          filteredOutputs.value = outputs;\n          // 初始化选择状态\n          selectedFiles.value = outputs.map(() => false);\n          \n          if (outputs.length === 0) {\n            ElMessage.error(\"解析完成，但未找到对话内容\");\n            return;\n          }\n          \n          status.value = `解析完成，找到 ${outputs.length} 个会话`;\n        } catch (err) {\n          ElMessage.error(err.message || \"解析失败\");\n          status.value = \"解析失败\";\n        }\n      };\n      \n      reader.readAsText(file, \"utf-8\");\n    }\n\n    async function handleDownload() {\n      if (!selectedFiles.value.some(selected => selected)) return;\n      \n      try {\n        status.value = \"正在准备导出...\";\n        \n        const selectedOutputs = lastOutputs.value.filter((_, index) => selectedFiles.value[index]);\n        \n        if (selectedOutputs.length === 1) {\n          // 单文件直接下载\n          const blob = new Blob([selectedOutputs[0].content], { type: \"text/plain\" });\n          const url = URL.createObjectURL(blob);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = selectedOutputs[0].filename;\n          a.click();\n          URL.revokeObjectURL(url);\n          status.value = \"导出完成\";\n        } else {\n          // 多文件打包为 zip\n          status.value = \"正在打包文件，请稍候...\";\n          const zip = new JSZip();\n          \n          // 添加所有选中的文件到zip\n          selectedOutputs.forEach(output => {\n            zip.file(output.filename, output.content);\n          });\n          \n          // 生成zip文件\n          const content = await zip.generateAsync({type: \"blob\"});\n          const url = URL.createObjectURL(content);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = \"chatgpt_dialogues.zip\";\n          a.click();\n          URL.revokeObjectURL(url);\n          \n          status.value = `已导出 ${selectedOutputs.length} 个文件到 chatgpt_dialogues.zip`;\n        }\n      } catch (err) {\n        status.value = \"导出失败\";\n      }\n    }\n\n    const chatLines = computed(() => {\n      if (!currentFile.value?.content) return [];\n      \n      // 只匹配特定的角色标记\n      const rolePattern = /【(model_message|user_message|assistant|user)】/;\n      const lines = currentFile.value.content.split('\\n');\n      const messages = [];\n      let currentMessage = '';\n      let currentRole = '';\n\n      for (const line of lines) {\n        const match = line.match(rolePattern);\n        if (match) {\n          // 如果已经有消息，保存之前的消息\n          if (currentMessage) {\n            messages.push(`【${currentRole}】${currentMessage}`);\n          }\n          // 开始新的消息\n          currentRole = match[1];\n          currentMessage = line.replace(rolePattern, '').trim();\n        } else if (currentRole) {\n          // 如果不是角色标记，且当前有角色，则添加到当前消息\n          currentMessage += '\\n' + line;\n        }\n      }\n      \n      // 添加最后一条消息\n      if (currentMessage) {\n        messages.push(`【${currentRole}】${currentMessage}`);\n      }\n\n      return messages.filter(msg => {\n        const content = msg.replace(/^【.*?】\\s*/, '').trim();\n        return content.length > 0;\n      });\n    });\n\n    function getMessageClass(line) {\n      if (line.startsWith('【assistant】') || line.startsWith('【model_message】')) {\n        return 'message-left';\n      }\n      return 'message-right';\n    }\n\n    function isLeftMessage(line) {\n      return line.startsWith('【assistant】') || line.startsWith('【model_message】');\n    }\n\n    function getMessageContent(line, lineIndex) {\n      // 提取时间戳\n      const timestampMatch = line.match(/\\[(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})\\]/);\n      const timestamp = timestampMatch ? timestampMatch[1] : '';\n      \n      // 移除角色标记和时间戳\n      let content = line.replace(/^【.*?】\\s*/, '').trim();\n      content = content.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]\\s*/, '');\n      \n      // 只在 user_message 类型的消息中移除分割线，且只匹配20个或更多连续的连字符\n      const cleanContent = line.startsWith('【user_message】') \n        ? content.replace(/-{20,}/g, '')\n        : content;\n        \n      // 将全角引号转换为半角\n      const normalizedContent = cleanContent\n        .replace(/['’＇]/g, \"'\")  // 全角单引号转半角\n        .replace(/[\"＂]/g, '\"')  // 全角双引号转半角\n        \n      let html = marked(normalizedContent, { breaks: true });\n      \n      if (searchKeyword.value) {\n        // 高亮所有关键词\n        const reg = new RegExp(searchKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi');\n        let matchIdx = 0;\n        html = html.replace(reg, (m) => {\n          const refId = `search-match-${lineIndex}-${matchIdx}`;\n          matchIdx++;\n          return `<mark data-match-idx=\"${matchIdx-1}\" id=\"${refId}\">${m}</mark>`;\n        });\n      }\n      \n      // 添加时间戳到内容前面\n      if (timestamp) {\n        html = `<span class=\"timestamp\">${timestamp}</span>${html}`;\n      }\n      \n      return html.replace(/\\s+$/, '').replace(/\\n$/, '');\n    }\n\n    const statistics = computed(() => {\n      if (!currentFile.value?.content) {\n        return {\n          totalTokens: 0,\n          assistantCount: 0,\n          userCount: 0\n        };\n      }\n\n      const lines = currentFile.value.content.split('\\n');\n      let totalTokens = 0;\n      let assistantCount = 0;\n      let userCount = 0;\n      let currentContent = '';\n      let currentRole = '';\n\n      const countTokens = (text) => {\n        // 移除URL和时间戳\n        text = text.replace(/https?:\\/\\/[^\\s]+/g, '');\n        text = text.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '');\n        \n        let count = 0;\n        \n        // 分割文本为单词、数字和其他字符\n        const tokens = text.match(/[a-zA-Z]+|[0-9]+|[\\u4e00-\\u9fa5]|[^\\s]/g) || [];\n        \n        for (const token of tokens) {\n          if (/[a-zA-Z]/.test(token)) {\n            // 英文单词，按单词长度计算\n            count += Math.ceil(token.length / 4); // 每4个字符算一个token\n          } else if (/[0-9]/.test(token)) {\n            // 数字，按位数计算\n            count += Math.ceil(token.length / 2); // 每2位数字算一个token\n          } else if (/[\\u4e00-\\u9fa5]/.test(token)) {\n            // 中文字符\n            count += 1;\n          } else if (/[\\s.,!?;:'\"()\\-–—…]/.test(token)) {\n            // 标点符号和空格\n            count += 0.5;\n          } else {\n            // 其他字符（包括markdown标记）\n            count += 0.5;\n          }\n        }\n        \n        return Math.round(count);\n      };\n\n      for (const line of lines) {\n        if (line.startsWith('【assistant】') || line.startsWith('【model_message】')) {\n          // 如果之前有内容，先处理之前的内容\n          if (currentContent && currentRole) {\n            totalTokens += countTokens(currentContent);\n            if (currentRole === 'assistant') assistantCount++;\n            else userCount++;\n          }\n          currentRole = 'assistant';\n          currentContent = line.replace(/^【.*?】\\s*/, '').trim();\n        } else if (line.startsWith('【user】') || line.startsWith('【user_message】')) {\n          // 如果之前有内容，先处理之前的内容\n          if (currentContent && currentRole) {\n            totalTokens += countTokens(currentContent);\n            if (currentRole === 'assistant') assistantCount++;\n            else userCount++;\n          }\n          currentRole = 'user';\n          currentContent = line.replace(/^【.*?】\\s*/, '').trim();\n        } else if (currentRole) {\n          // 如果不是角色标记，且当前有角色，则添加到当前内容\n          currentContent += '\\n' + line;\n        }\n      }\n      \n      // 处理最后一条消息\n      if (currentContent && currentRole) {\n        totalTokens += countTokens(currentContent);\n        if (currentRole === 'assistant') assistantCount++;\n        else userCount++;\n      }\n\n      return {\n        totalTokens,\n        assistantCount,\n        userCount\n      };\n    });\n\n    // 预加载编码器\n    onMounted(async () => {\n      // 设置页面标题\n      document.title = '💬 对话记录解析器'\n\n      // 等待页面渲染完成\n      await nextTick()\n      \n      // 延迟一小段时间再开始加载，确保页面完全渲染\n      setTimeout(async () => {\n        try {\n          await preloadEncoder()\n        } catch (error) {\n          console.error('Failed to preload encoder:', error)\n          ElMessage.error('加载失败，请刷新页面重试')\n        }\n      }, 100)\n    })\n\n    async function calculateExactTokens() {\n      if (!currentFile.value?.content) return\n      \n      isCalculating.value = true\n      exactTokens.value = null\n      \n      try {\n        // 打印用于计算的内容\n        // console.log('用于计算token的内容：', currentFile.value.content)\n        const tokens = await calculateTokens(currentFile.value.content)\n        if (tokens !== null) {\n          exactTokens.value = tokens\n        }\n      } catch (error) {\n        console.error('Token calculation failed:', error)\n        ElMessage.error('计算token失败，请稍后重试')\n      } finally {\n        isCalculating.value = false\n      }\n    }\n\n    // 切换选择模式\n    function toggleSelectMode() {\n      isSelectMode.value = !isSelectMode.value;\n      if (isSelectMode.value) {\n        // 进入选择模式时，初始化选择状态\n        selectedMessages.value = chatLines.value.map(() => false);\n      } else {\n        // 退出选择模式时，清空选择状态\n        selectedMessages.value = [];\n      }\n    }\n\n    // 全选/取消全选消息\n    function toggleSelectAllMessages() {\n      const shouldSelectAll = !isAllMessagesSelected.value;\n      selectedMessages.value = chatLines.value.map(() => shouldSelectAll);\n    }\n\n    // 导出选中的消息\n    async function exportSelectedMessages() {\n      if (!currentFile.value?.filename) {\n        ElMessage.error('没有可导出的对话内容');\n        return;\n      }\n\n      const selectedLines = chatLines.value.filter((_, index) => selectedMessages.value[index]);\n      if (selectedLines.length === 0) {\n        ElMessage.warning('请选择要导出的消息');\n        return;\n      }\n\n      try {\n        // 创建包含选中消息的内容\n        const exportContent = selectedLines.join('\\n');\n        const blob = new Blob([exportContent], { type: \"text/plain;charset=utf-8\" });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        \n        // 生成文件名\n        const originalName = currentFile.value.filename.replace(/\\.[^/.]+$/, \"\");\n        a.download = `${originalName}_选中消息.txt`;\n        a.click();\n        URL.revokeObjectURL(url);\n        \n        ElMessage.success(`已导出 ${selectedLines.length} 条选中消息`);\n      } catch (error) {\n        console.error('导出失败:', error);\n        ElMessage.error('导出失败，请稍后重试');\n      }\n    }\n\n    // 新增：处理txt文件上传\n    async function handleTxtFileChange(event) {\n      const files = event.target.files;\n      if (!files || !files.length) return;\n      let newOutputs = [];\n      for (const file of files) {\n        try {\n          const text = await file.text();\n          // 检查文件内容是否为空或只包含空白字符\n          if (!text.trim()) {\n            ElMessage.error(`${file.name} 文件内容为空`);\n            continue;\n          }\n          \n          // 检查是否包含有效的对话内容\n          const lines = text.split('\\n');\n          const hasValidContent = lines.some(line => {\n            const trimmedLine = line.trim();\n            return trimmedLine && !trimmedLine.startsWith('-'.repeat(20));\n          });\n          \n          if (!hasValidContent) {\n            ElMessage.error(`${file.name} 未包含有效的对话内容`);\n            continue;\n          }\n\n          // 检查是否包含AI或用户对话\n          const hasDialogContent = lines.some(line => {\n            const trimmedLine = line.trim();\n            return trimmedLine && (\n              trimmedLine.startsWith('【assistant】') ||\n              trimmedLine.startsWith('【user】') ||\n              trimmedLine.startsWith('【model_message】') ||\n              trimmedLine.startsWith('【user_message】')\n            );\n          });\n\n          if (!hasDialogContent) {\n            ElMessage.error(`${file.name} 未包含有效的AI或用户对话内容`);\n            continue;\n          }\n          \n          // 以文件名为会话名\n          newOutputs.push({ filename: file.name, content: text });\n        } catch (e) {\n          ElMessage.error(`读取${file.name}失败`);\n        }\n      }\n      if (newOutputs.length) {\n        // 合并到现有聊天窗口\n        lastOutputs.value = [...lastOutputs.value, ...newOutputs];\n        filteredOutputs.value = lastOutputs.value;\n        selectedFiles.value = lastOutputs.value.map(() => false);\n        status.value = `已导入 ${newOutputs.length} 个txt文件`;\n      }\n      // 清空input，允许重复上传同一文件\n      event.target.value = '';\n    }\n\n    // 统计所有高亮\n    function updateMatchRefs() {\n      nextTick(() => {\n        matchRefs.value = Array.from(document.querySelectorAll('.modal-body mark[data-match-idx]'));\n        matchCount.value = matchRefs.value.length;\n        if (matchCount.value > 0) {\n          scrollToMatch(currentMatchIndex.value);\n        }\n      });\n    }\n\n    // 滚动到指定高亮\n    function scrollToMatch(idx) {\n      if (matchRefs.value[idx]) {\n        matchRefs.value[idx].scrollIntoView({ behavior: 'smooth', block: 'center' });\n        matchRefs.value.forEach((el, i) => {\n          el.classList.toggle('active-match', i === idx);\n        });\n      }\n    }\n\n    function gotoPrevMatch() {\n      if (matchCount.value <= 1) return;\n      currentMatchIndex.value = (currentMatchIndex.value - 1 + matchCount.value) % matchCount.value;\n      scrollToMatch(currentMatchIndex.value);\n    }\n    function gotoNextMatch() {\n      if (matchCount.value <= 1) return;\n      currentMatchIndex.value = (currentMatchIndex.value + 1) % matchCount.value;\n      scrollToMatch(currentMatchIndex.value);\n    }\n\n    // 每次弹窗打开或内容变化时，更新高亮和滚动\n    watch([showModal, searchKeyword, currentFile], () => {\n      if (showModal.value) {\n        currentMatchIndex.value = 0;\n        updateMatchRefs();\n      }\n    });\n\n    return {\n      outputContent,\n      status,\n      canDownload,\n      lastOutputs,\n      selectedFiles,\n      isAllSelected,\n      showModal,\n      currentFile,\n      searchQuery,\n      filteredOutputs,\n      statistics,\n      handleFileChange,\n      handleDownload,\n      showFileContent,\n      closeModal,\n      toggleSelectAll,\n      updateSelection,\n      chatLines,\n      getMessageClass,\n      isLeftMessage,\n      getMessageContent,\n      handleSearch,\n      isCalculating,\n      exactTokens,\n      calculateExactTokens,\n      handleTxtFileChange,\n      searchKeyword,\n      matchCount,\n      currentMatchIndex,\n      gotoPrevMatch,\n      gotoNextMatch,\n      toggleSelectMode,\n      toggleSelectAllMessages,\n      exportSelectedMessages,\n      selectedMessages,\n      isSelectMode,\n      isAllMessagesSelected,\n      hasSelectedMessages,\n      selectedMessagesCount\n    };\n  }\n}\n</script>\n\n<style scoped>\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.container {\n  font-family: \"PingFang SC\", \"Microsoft YaHei\", sans-serif;\n  line-height: 1.6;\n  padding: 30px;\n  max-width: 800px;\n  margin: 0 auto;\n  background-color: #fff;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\nh1 {\n  color: #8e9aaf;\n  margin-bottom: 30px;\n  text-align: center;\n  font-size: 1.8em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\nh2 {\n  font-size: 1.3em;\n  margin-bottom: 15px;\n  color: #8e9aaf;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.file-input-container {\n  margin: 20px 0;\n  text-align: center;\n}\n\n.file-input-label {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background-color: #e8eaf6;\n  color: #7986cb;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.file-input-label:hover {\n  background-color: #c5cae9;\n  transform: translateY(-2px);\n}\n\ninput[type=\"file\"] {\n  display: none;\n}\n\n.file-list {\n  margin: 20px 0;\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 12px;\n  border: 1px solid #e8eaf6;\n  height: 50vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.search-container {\n  margin-bottom: 15px;\n}\n\n.search-container :deep(.el-input__wrapper) {\n  background-color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n}\n\n.search-container :deep(.el-input__inner) {\n  height: 40px;\n}\n\n.search-container :deep(.el-input__prefix) {\n  color: #9fa8da;\n}\n\n.file-list-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  border: 1px solid #e8eaf6;\n  border-radius: 8px;\n  background: white;\n}\n\n.select-all-container {\n  padding: 12px;\n  border-bottom: 1px solid #e8eaf6;\n  background-color: #f5f6fa;\n}\n\n.select-all-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  user-select: none;\n  color: #7986cb;\n  font-weight: 500;\n}\n\n.file-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 12px;\n  border-bottom: 1px solid #e8eaf6;\n  transition: all 0.2s ease;\n}\n\n.file-checkbox {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.file-name {\n  flex-grow: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  color: #5c6bc0;\n  word-break: break-word;\n  text-align: left;\n  min-width: 0;\n}\n\n.file-name .el-icon {\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.file-name:hover {\n  color: #7986cb;\n}\n\n.file-item:hover {\n  background-color: #f5f6fa;\n}\n\n.empty-state {\n  padding: 40px 20px;\n  text-align: center;\n  color: #9fa8da;\n  font-style: italic;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state .el-icon {\n  font-size: 24px;\n}\n\n.button-container {\n  text-align: center;\n  margin-top: 20px;\n}\n\nbutton {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background-color: #7986cb;\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\nbutton:hover {\n  background-color: #5c6bc0;\n  transform: translateY(-2px);\n}\n\nbutton:disabled {\n  background-color: #c5cae9;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.status {\n  margin-top: 15px;\n  text-align: center;\n  color: #9fa8da;\n  font-size: 0.9em;\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n\n.modal-content {\n  background-color: white;\n  border-radius: 16px;\n  width: 95%;\n  max-width: 800px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n}\n\n.modal-header {\n  padding: 20px;\n  border-bottom: 1px solid #e8eaf6;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.header-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #5c6bc0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  word-break: break-all;\n  font-size: 1.1em;\n  flex: 1;\n  min-width: 0;\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.statistics-note {\n  display: flex;\n  align-items: center;\n  color: #9fa8da;\n  cursor: help;\n  width: 32px;\n  height: 32px;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.statistics-note:hover {\n  color: #5c6bc0;\n  background-color: #f5f6fa;\n}\n\n.statistics-note .el-icon {\n  font-size: 16px;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #9fa8da;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  flex-shrink: 0;\n  width: 32px;\n  height: 32px;\n  border-radius: 4px;\n}\n\n.close-button:hover {\n  color: #5c6bc0;\n  background-color: #f5f6fa;\n}\n\n.statistics {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 0.9em;\n  color: #666;\n  flex-wrap: wrap;\n}\n\n.stat-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n.stat-label {\n  color: #9fa8da;\n}\n\n.stat-value {\n  color: #5c6bc0;\n  font-weight: 500;\n}\n\n.token-calc {\n  margin-left: auto;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 1;\n  flex-wrap: wrap;\n  min-width: 0;\n  justify-content: flex-end;\n}\n\n.export-current {\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.export-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #e8f5e8;\n  color: #4caf50;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9em;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.export-button:hover {\n  background-color: #c8e6c9;\n  transform: translateY(-1px);\n}\n\n.export-button:disabled {\n  background-color: #f1f8e9;\n  color: #81c784;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.mode-toggle-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #e3f2fd;\n  color: #1976d2;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9em;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.mode-toggle-button:hover {\n  background-color: #bbdefb;\n  transform: translateY(-1px);\n}\n\n.select-all-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #fff3e0;\n  color: #f57c00;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9em;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.select-all-button:hover {\n  background-color: #ffe0b2;\n  transform: translateY(-1px);\n}\n\n.message-checkbox {\n  display: flex;\n  align-items: flex-start;\n  padding-top: 12px;\n  flex-shrink: 0;\n}\n\n.message-checkbox input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: #7986cb;\n  margin: 0;\n}\n\n.message-checkbox label {\n  cursor: pointer;\n  margin: 0;\n}\n\n.modal-body {\n  padding: 20px;\n  overflow-y: auto;\n  flex-grow: 1;\n  background-color: #f5f6fa;\n}\n\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n  padding: 0 12px;\n}\n\n.message-container {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  width: 100%;\n  max-width: 100%;\n  padding-left: 12px; /* 默认左边距，与选中状态保持一致 */\n}\n\n.message-container.selected {\n  /* 添加微妙的边框指示，不影响布局 */\n  border-left: 3px solid #7986cb;\n  padding-left: 9px; /* 补偿边框宽度，保持对齐 */\n}\n\n.message-wrapper {\n  display: flex;\n  gap: 12px;\n  flex: 1;\n  min-width: 0;\n}\n\n.message-left {\n  align-self: flex-start;\n  padding-right: 20%;\n}\n\n.message-right {\n  align-self: flex-end;\n  flex-direction: row-reverse;\n  padding-left: 20%;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: #e8eaf6;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.message-bubble {\n  padding: 12px 16px;\n  border-radius: 16px;\n  font-size: 0.95em;\n  line-height: 1.5;\n  word-break: break-word;\n  white-space: pre-wrap;\n  text-align: left;\n  min-width: 60px;\n  max-width: 100%;\n  display: inline-block;\n  position: relative;\n}\n\n.message-bubble :deep(.timestamp) {\n  font-size: 0.8em;\n  opacity: 0.7;\n  margin-bottom: 4px;\n  display: block;\n}\n\n.message-left .message-bubble :deep(.timestamp) {\n  color: #7986cb;\n}\n\n.message-right .message-bubble :deep(.timestamp) {\n  color: #e8eaf6;\n}\n\n.message-bubble :deep(p) {\n  margin: 0;\n  padding: 0;\n}\n\n.message-bubble :deep(p:last-child) {\n  margin-bottom: 0;\n}\n\n.message-bubble :deep(p + p) {\n  margin-top: 1em;\n}\n\n.message-bubble :deep(em) {\n  font-style: italic;\n}\n\n.message-bubble :deep(strong) {\n  font-weight: bold;\n}\n\n.message-bubble :deep(code) {\n  background-color: rgba(0, 0, 0, 0.05);\n  padding: 2px 4px;\n  border-radius: 4px;\n  font-family: monospace;\n}\n\n.message-bubble :deep(pre) {\n  background-color: rgba(0, 0, 0, 0.05);\n  padding: 8px;\n  border-radius: 4px;\n  overflow-x: auto;\n  margin: 8px 0;\n}\n\n.message-bubble :deep(pre code) {\n  background-color: transparent;\n  padding: 0;\n}\n\n.message-bubble :deep(ul), .message-bubble :deep(ol) {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n\n.message-bubble :deep(blockquote) {\n  border-left: 4px solid rgba(0, 0, 0, 0.1);\n  margin: 8px 0;\n  padding-left: 12px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.message-left .message-bubble {\n  background-color: white;\n  color: #5c6bc0;\n  border: 1px solid #e8eaf6;\n  border-top-left-radius: 4px;\n}\n\n.message-right .message-bubble {\n  background-color: #7986cb;\n  color: white;\n  border-top-right-radius: 4px;\n}\n\n.message-bubble :deep(mark[data-match-idx]) {\n  background: #e8eaf6;\n  color: #5c6bc0;\n  padding: 0 2px;\n  border-radius: 2px;\n  transition: all 0.2s;\n}\n\n.message-bubble :deep(mark[data-match-idx].active-match) {\n  background: #c5cae9;\n  box-shadow: 0 0 0 2px #7986cb;\n}\n\n/* 移动端适配 */\n@media screen and (max-width: 768px) {\n  .container {\n    padding: 20px;\n  }\n\n  .modal-content {\n    width: 100%;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n\n  .modal-header {\n    padding: 16px;\n    gap: 8px;\n  }\n\n  .header-top {\n    gap: 8px;\n  }\n\n  .close-button {\n    width: 28px;\n    height: 28px;\n  }\n\n  .statistics {\n    font-size: 0.85em;\n  }\n\n  .file-input-label {\n    padding: 8px 16px;\n    font-size: 0.9em;\n    gap: 6px;\n  }\n\n  .file-input-label + .file-input-label {\n    margin-left: 8px;\n  }\n\n  .statistics-row {\n    gap: 8px;\n  }\n\n  .stat-item {\n    gap: 2px;\n  }\n\n  .token-calc {\n    gap: 6px;\n  }\n\n  .message-left {\n    padding-right: 5%;\n  }\n\n  .message-right {\n    padding-left: 5%;\n  }\n\n  .avatar {\n    width: 36px;\n    height: 36px;\n  }\n\n  .message-bubble {\n    font-size: 0.9em;\n    padding: 10px 14px;\n  }\n\n  .header-actions {\n    gap: 4px;\n  }\n\n  .statistics-note {\n    width: 28px;\n    height: 28px;\n  }\n\n  .export-current {\n    order: 0;\n    width: auto;\n    justify-content: flex-start;\n    margin-top: 0;\n    gap: 4px;\n    flex: 1;\n  }\n\n  .export-button {\n    padding: 4px 8px;\n    font-size: 0.8em;\n    flex: 0 0 auto;\n    max-width: none;\n    min-width: auto;\n    white-space: nowrap;\n  }\n\n  .mode-toggle-button,\n  .select-all-button {\n    padding: 4px 8px;\n    font-size: 0.8em;\n    flex: 0 0 auto;\n    max-width: none;\n    min-width: auto;\n    white-space: nowrap;\n  }\n\n  .token-calc {\n    width: auto;\n    justify-content: flex-end;\n    margin-top: 0;\n    margin-left: auto;\n    flex: 0 0 auto;\n  }\n\n  .message-checkbox input[type=\"checkbox\"] {\n    width: 16px;\n    height: 16px;\n  }\n\n  .message-container.selected {\n    /* 移除会导致移位的样式 */\n  }\n\n  .message-checkbox {\n    padding-top: 10px;\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .container {\n    padding: 15px;\n  }\n\n  .modal-header {\n    padding: 12px;\n  }\n\n  .close-button {\n    width: 24px;\n    height: 24px;\n  }\n\n  .statistics {\n    font-size: 0.8em;\n  }\n\n  .file-input-label {\n    padding: 6px 12px;\n    font-size: 0.85em;\n    gap: 4px;\n  }\n\n  .file-input-label + .file-input-label {\n    margin-left: 6px;\n  }\n\n  .statistics-row {\n    gap: 6px;\n  }\n\n  .stat-item {\n    font-size: 0.85em;\n  }\n\n  .export-current {\n    flex-direction: row;\n    gap: 4px;\n    align-items: center;\n    flex: 1;\n    justify-content: flex-start;\n  }\n\n  .export-button {\n    padding: 4px 8px;\n    font-size: 0.75em;\n    width: auto;\n    max-width: none;\n    white-space: nowrap;\n    flex: 0 0 auto;\n  }\n\n  .mode-toggle-button,\n  .select-all-button {\n    padding: 4px 8px;\n    font-size: 0.75em;\n    width: auto;\n    max-width: none;\n    white-space: nowrap;\n    flex: 0 0 auto;\n  }\n\n  .token-calc {\n    width: auto;\n    justify-content: flex-end;\n    margin-top: 0;\n    margin-left: auto;\n    flex: 0 0 auto;\n    gap: 4px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.75em;\n  }\n\n  .message-left {\n    padding-right: 2%;\n  }\n\n  .message-right {\n    padding-left: 2%;\n  }\n\n  .avatar {\n    width: 32px;\n    height: 32px;\n  }\n\n  .message-bubble {\n    font-size: 0.85em;\n    padding: 8px 12px;\n  }\n\n  .statistics-note {\n    width: 24px;\n    height: 24px;\n  }\n\n  .message-checkbox input[type=\"checkbox\"] {\n    width: 14px;\n    height: 14px;\n  }\n\n  .message-checkbox {\n    padding-top: 8px;\n  }\n}\n\n/* 优化滚动条样式 */\n.modal-body::-webkit-scrollbar {\n  width: 6px;\n}\n\n.modal-body::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.modal-body::-webkit-scrollbar-thumb {\n  background: #c5cae9;\n  border-radius: 3px;\n}\n\n.modal-body::-webkit-scrollbar-thumb:hover {\n  background: #9fa8da;\n}\n\n.token-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #e8eaf6;\n  color: #5c6bc0;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9em;\n  transition: all 0.2s ease;\n}\n\n.token-button:hover:not(:disabled) {\n  background-color: #c5cae9;\n  transform: translateY(-1px);\n}\n\n.token-button:disabled {\n  background-color: #f5f6fa;\n  color: #9fa8da;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.token-value {\n  color: #5c6bc0;\n  font-weight: 500;\n  margin-right: 4px;\n}\n\n.token-label {\n  color: #9fa8da;\n  font-size: 0.9em;\n}\n\n.is-loading {\n  animation: rotating 2s linear infinite;\n}\n\n@keyframes rotating {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.85em;\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .statistics-table {\n    font-size: 0.85em;\n  }\n\n  .statistics-table td:not(:last-child) {\n    padding-right: 6px;\n  }\n\n  .token-calc {\n    padding-left: 6px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.8em;\n  }\n}\n\n.search-nav {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  margin-top: 8px;\n  margin-bottom: 0;\n  width: 100%;\n}\n.search-nav button {\n  background: #e8eaf6;\n  color: #5c6bc0;\n  border: none;\n  border-radius: 6px;\n  padding: 4px 12px;\n  cursor: pointer;\n  font-size: 0.95em;\n  transition: all 0.2s;\n  min-width: 80px;\n}\n.search-nav button:disabled {\n  background: #f5f6fa;\n  color: #b0b0b0;\n  cursor: not-allowed;\n}\n.search-nav span {\n  min-width: 60px;\n  text-align: center;\n  color: #5c6bc0;\n}\n\n.statistics-table {\n  width: 100%;\n  border-collapse: collapse;\n  table-layout: fixed;\n}\n\n.statistics-table td {\n  padding: 0;\n  white-space: nowrap;\n  width: auto;\n}\n\n.statistics-table td:not(:last-child) {\n  padding-right: 12px;\n}\n\n.token-calc {\n  text-align: right;\n  padding-left: 12px;\n  width: auto;\n}\n\n.stat-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  white-space: nowrap;\n}\n\n@media screen and (max-width: 768px) {\n  .statistics-table {\n    font-size: 0.9em;\n  }\n\n  .statistics-table td:not(:last-child) {\n    padding-right: 8px;\n  }\n\n  .token-calc {\n    padding-left: 8px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.85em;\n  }\n\n  .stat-item {\n    gap: 2px;\n  }\n}\n\n@media screen and (max-width: 480px) {\n  .statistics-table {\n    font-size: 0.85em;\n  }\n\n  .statistics-table td:not(:last-child) {\n    padding-right: 6px;\n  }\n\n  .token-calc {\n    padding-left: 6px;\n  }\n\n  .token-button {\n    padding: 4px 8px;\n    font-size: 0.8em;\n  }\n}\n</style> ","import { encode } from 'gpt-tokenizer/model/gpt-4o'\r\n\r\nlet encoder = null\r\n\r\n// 预加载编码器\r\nexport async function preloadEncoder() {\r\n  if (!encoder) {\r\n    encoder = encode\r\n  }\r\n  return encoder\r\n}\r\n\r\n// 计算文本的 token 数量\r\nexport async function calculateTokens(text) {\r\n  try {\r\n    if (!encoder) {\r\n      await preloadEncoder()\r\n    }\r\n\r\n    // 按行分割文本\r\n    const lines = text.split('\\n')\r\n    let totalTokens = 0\r\n    let currentContent = ''\r\n    let currentRole = ''\r\n\r\n    for (const line of lines) {\r\n      // 只匹配 user 和 assistant\r\n      if (line.startsWith('【assistant】')) {\r\n        // 如果之前有内容，先计算之前的token\r\n        if (currentContent && currentRole) {\r\n          // 移除时间戳\r\n          const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n          const tokens = encoder(cleanContent)\r\n          // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n          totalTokens += tokens.length\r\n        }\r\n        // 开始新的内容\r\n        currentRole = 'assistant'\r\n        currentContent = line.replace(/^【.*?】\\s*/, '').trim()\r\n      } else if (line.startsWith('【user】')) {\r\n        // 如果之前有内容，先计算之前的token\r\n        if (currentContent && currentRole) {\r\n          // 移除时间戳\r\n          const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n          const tokens = encoder(cleanContent)\r\n          // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n          totalTokens += tokens.length\r\n        }\r\n        // 开始新的内容\r\n        currentRole = 'user'\r\n        currentContent = line.replace(/^【.*?】\\s*/, '').trim()\r\n      } else if (currentRole) {\r\n        // 如果不是角色标记，且当前有角色，则添加到当前内容\r\n        currentContent += '\\n' + line\r\n      }\r\n    }\r\n    \r\n    // 处理最后一条消息\r\n    if (currentContent && currentRole) {\r\n      // 移除时间戳\r\n      const cleanContent = currentContent.replace(/\\[\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\]/g, '').trim()\r\n      const tokens = encoder(cleanContent)\r\n      // console.log(`计算 ${currentRole} 的内容：\\n${cleanContent}\\nToken数量：${tokens.length}`)\r\n      totalTokens += tokens.length\r\n    }\r\n\r\n    console.log(`总计 Token 数量：${totalTokens}`)\r\n    return totalTokens\r\n  } catch (error) {\r\n    console.error('Token calculation failed:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// 获取编码器实例\r\nexport function getEncoder() {\r\n  return encoder\r\n} ","import { render } from \"./App.vue?vue&type=template&id=797740c9&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=797740c9&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-797740c9\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkchatlog_parser\"] = self[\"webpackChunkchatlog_parser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(2706); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","for","style","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_icon","_component_ChatDotRound","_hoisted_2","_hoisted_3","_component_Upload","type","id","accept","onChange","_cache","args","$setup","handleFileChange","_hoisted_4","multiple","handleTxtFileChange","_hoisted_5","_component_Document","_hoisted_6","_component_el_input","searchQuery","$event","placeholder","_ctx","Search","clearable","onInput","handleSearch","prefix","_withCtx","_component_Search","_hoisted_7","lastOutputs","length","_hoisted_8","_hoisted_9","checked","isAllSelected","toggleSelectAll","_component_Select","_hoisted_11","_Fragment","_renderList","filteredOutputs","output","index","key","_hoisted_12","selectedFiles","updateSelection","onClick","showFileContent","_component_ChatLineRound","_toDisplayString","filename","_hoisted_15","_component_UploadFilled","showModal","_withModifiers","closeModal","_hoisted_16","_hoisted_17","_hoisted_18","currentFile","_hoisted_19","_hoisted_20","_component_el_tooltip","effect","content","placement","_component_InfoFilled","_component_Close","_hoisted_21","_hoisted_22","_hoisted_23","statistics","totalTokens","_hoisted_24","_hoisted_25","assistantCount","_hoisted_26","_hoisted_27","userCount","_hoisted_28","toggleSelectMode","title","isSelectMode","toggleSelectAllMessages","isAllMessagesSelected","exportSelectedMessages","disabled","hasSelectedMessages","_component_Download","selectedMessagesCount","_hoisted_32","calculateExactTokens","isCalculating","_createBlock","_component_Loading","exactTokens","_hoisted_34","_hoisted_35","searchKeyword","matchCount","_hoisted_36","gotoPrevMatch","_hoisted_37","currentMatchIndex","gotoNextMatch","_hoisted_38","_hoisted_39","_hoisted_40","chatLines","line","_normalizeClass","selectedMessages","_hoisted_41","getMessageClass","_hoisted_44","isLeftMessage","_component_User","innerHTML","getMessageContent","_hoisted_46","handleDownload","canDownload","status","encoder","async","preloadEncoder","encode","calculateTokens","text","lines","split","currentContent","currentRole","startsWith","cleanContent","replace","trim","tokens","console","log","error","marked","setOptions","breaks","gfm","headerIds","mangle","pedantic","smartLists","smartypants","name","components","ChatDotRound","Upload","Document","Select","ChatLineRound","UploadFilled","Close","Download","User","InfoFilled","Loading","setup","outputContent","ref","computed","value","some","selected","matchRefs","every","filter","event","target","map","sanitizeFilename","extractDialogueFromMapping","mapping","dialogues","randomKey","item","message","msg","role","author","includes","timestamp","create_time","formatTimestamp","created_at","parts","join","push","metadata","userData","user_context_message_data","aboutModel","about_model_message","aboutUser","about_user_message","added","repeat","e","extractDialogueFromDeepSeekMapping","messages","fragments","Array","isArray","fragment","parent","inserted_at","sort","a","b","Date","idMap","forEach","parentMsg","dialogue","date","isNaN","getTime","utcDate","getTimezoneOffset","beijingDate","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","processRawJson","data","outputs","counter","undefined","chat_messages","chatMessages","sender","base","count","fn","isDeepSeek","f","Error","txt","file","query","toLowerCase","files","reader","FileReader","onload","JSON","parse","result","ElMessage","err","readAsText","selectedOutputs","_","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","zip","JSZip","generateAsync","rolePattern","currentMessage","match","lineIndex","timestampMatch","normalizedContent","html","reg","RegExp","matchIdx","m","refId","countTokens","token","test","Math","ceil","round","shouldSelectAll","selectedLines","exportContent","originalName","success","warning","newOutputs","hasValidContent","trimmedLine","hasDialogContent","updateMatchRefs","nextTick","from","querySelectorAll","scrollToMatch","idx","scrollIntoView","behavior","block","el","i","classList","toggle","onMounted","setTimeout","watch","__exports__","render","app","createApp","App","use","ElementPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}